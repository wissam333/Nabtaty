import{_ as le}from"./BbA-o76e.js";import{_ as te}from"./C3_fBZW9.js";import{_ as ae,u as se,b as oe,a as ne,c as ie,d as re}from"./B-xVLMgY.js";import{a as i,a3 as c,D as u,a8 as e,a0 as a,M as p,Y as O,u as n,F as Y,af as de,ag as ce,a4 as V,z as d,w as G,Q as U,a1 as D,a5 as q,$ as Q,a6 as ue,a7 as pe}from"./Bynz-MEc.js";import{u as h}from"./BiZJ-hRq.js";import{s as me}from"./DpQzEydf.js";import{s as ve}from"./99Vxj8jW.js";import{_ as fe}from"./TvlYamwF.js";import"./Df-GVvyW.js";import"./DLGQuXV3.js";import"./Cmc8rz6b.js";import"./wdptxeXm.js";import"./D1DtqsuL.js";import"./Bj7uUH7J.js";import"./DP9E7vwK.js";import"./DwlXvmMR.js";const be=B=>(ue("data-v-e958c56a"),B=B(),pe(),B),_e={class:"title-container"},he={class:"head-title"},ye={class:"header4"},ge={class:"options"},$e={class:"table-responsive"},Ce={key:0,class:"loading"},ke=be(()=>e("img",{src:ie,alt:""},null,-1)),we=[ke],Ee={key:1,class:"cat-tabel"},Ae={class:"d-flex align-items-center"},Ue={class:"cat-img mx-2"},De=["src"],Ie={key:1,src:fe,alt:""},Se={class:"cat-info d-flex flex-column align-items-start"},Re=["onClick"],Fe={class:"edit-link"},Ne=["onClick"],Le=["dir"],Pe={class:"content"},Ve={class:"d-flex flex-column-reverse mb-3"},Be=["placeholder"],xe={for:"priority"},qe={class:"d-flex flex-column-reverse mb-3"},ze=["placeholder"],Me={for:"titleAr"},Te={class:"d-flex flex-column-reverse mb-3"},Oe=["placeholder"],Ye={for:"titleEn"},Ge={class:"drop-area my-4"},Qe={class:"upload-box"},je=["src"],He={class:"mt-5 d-flex w-100 justify-content-end"},Ke=["onClick"],Ze=["dir"],Je={class:"content"},We={class:"d-flex flex-column-reverse mb-3"},Xe=["placeholder"],el={for:"editPriority"},ll={class:"d-flex flex-column-reverse mb-3"},tl=["placeholder"],al={for:"edittitleAr"},sl={class:"d-flex flex-column-reverse mb-3"},ol=["placeholder"],nl={for:"edittitleEn"},il={class:"drop-area my-4"},rl={class:"upload-box"},dl=["src"],cl={class:"mt-5 d-flex w-100 justify-content-end"},ul=["onClick"],pl={__name:"Category",setup(B){const{public:{api:b,apiBase:m}}=ne(),{locale:x}=se(),{$awn:y}=re(),I=i(!1),S=i(!1);let R=i(),F=i(),g=i(),$=i(),C=i(0),k=i(),N=i(),f=i(!1);const j=l=>{f.value=l};let z=i(!1),M=i();const L=async()=>{if(z.value=!0,x.value==="ar"){const{data:l,pending:t}=await h(`${b.findAllCategories}`,{credentials:"include",baseURL:m,headers:{"accept-language":"ar"}},"$FJ19DBBFI1");G(()=>{l.value&&(M.value=l.value.sort((r,v)=>r.priority-v.priority))})}else{const{data:l,pending:t}=await h(`${b.findAllCategories}`,{credentials:"include",baseURL:m,headers:{"accept-language":"en"}},"$9lYKQQEgVe");G(()=>{l.value&&(M.value=l.value.sort((r,v)=>r.priority-v.priority))})}z.value=!1};L();const H=async()=>{await h(`${b.RemoveCat}/${N.value.id}`,{credentials:"include",baseURL:m,method:"DELETE"},"$LkaI59UOEh"),L(),f.value=!1,x.value==="en"?y.success("Category Deleted Successfully",{durations:{global:5e3}}):y.success("تم حذف الفئة بنجاح",{durations:{global:5e3}})},_=i(null),w=i(null);function K(l){const t=l.files[0];w.value=t;const r=new FileReader;r.onload=async v=>{_.value=v.target.result},r.readAsDataURL(t)}const E=i(null),P=i(null);function Z(l){const t=l.files[0];P.value=t;const r=new FileReader;r.onload=async v=>{E.value=v.target.result},r.readAsDataURL(t)}const J=async()=>{const l=new FormData;l.append("category_name_AR",R.value),l.append("category_name_EN",F.value),l.append("priority",C.value),P.value&&l.append("photoPath",P.value),await h(b.AddCat,{baseURL:m,method:"POST",credentials:"include",body:l},"$okLdEIHKAL"),L(),I.value=!1,E.value=null,P.value=null,C.value=0,x.value==="en"?y.success("Category Added Successfully",{durations:{global:5e3}}):y.success("تم إضافة الفئة بنجاح",{durations:{global:5e3}})},W=async()=>{const{data:l}=await h(`${b.GetCatById}/${A.value.id}`,{credentials:"include",baseURL:m,headers:{"accept-language":"ar"}},"$7GnBDYPmkZ"),{data:t}=await h(`${b.GetCatById}/${A.value.id}`,{credentials:"include",baseURL:m,headers:{"accept-language":"en"}},"$HrrVSFkZwz");$.value=t.value.category_name,g.value=l.value.category_name,w.value=m+"/"+t.value.photo,_.value=m+"/"+t.value.photo,k.value=t.value.priority};let A=i();const X=async()=>{const l=new FormData;l.append("category_name_AR",g.value),l.append("category_name_EN",$.value),l.append("priority",k.value),w.value&&l.append("photoPath",w.value),await h(`${b.EditCat}/${A.value.id}`,{credentials:"include",body:l,baseURL:m,method:"PUT"},"$CEX3arzEhg"),L(),S.value=!1,_.value=null,w.value=null,x.value==="en"?y.success("Category Edited Successfully",{durations:{global:5e3}}):y.success("تم تعديل الفئة بنجاح",{durations:{global:5e3}})};return(l,t)=>{const r=le,v=ve,T=me,ee=te;return c(),u(Y,null,[e("div",{class:ce(["contain",("useSidebar"in l?l.useSidebar:n(oe))().value?"shrink":""])},[e("div",_e,[e("div",he,[e("h4",ye,a(l.$i18n.locale==="ar"?"قائمة الفئات":"Categories List"),1)]),e("div",ge,[e("div",{class:"reload btn btn-success mx-2",onClick:t[0]||(t[0]=o=>I.value=!0)},[p(r,{icon:["fas","plus"]}),O(" "+a(l.$i18n.locale==="ar"?"إضافة":"Add"),1)]),e("div",{class:"reload btn btn-success",onClick:t[1]||(t[1]=o=>L())},[p(r,{icon:["fas","rotate-right"]}),O(" "+a(l.$i18n.locale==="ar"?"إعادة تحميل":"Reload"),1)])])]),e("div",$e,[n(z)?(c(),u("div",Ce,we)):(c(),u("div",Ee,[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,a(l.$i18n.locale==="ar"?"الترتيب":"Priority"),1),e("th",null,a(l.$i18n.locale==="ar"?"الاسم":"Name"),1),e("th",null,a(l.$i18n.locale==="ar"?"تعديل":"Edit"),1)])]),e("tbody",null,[(c(!0),u(Y,null,de(n(M),o=>(c(),u("tr",{class:"rows",key:o.id},[e("td",null,[e("span",null,a(o.priority),1)]),e("td",Ae,[e("div",Ue,[o.photo?(c(),u("img",{key:0,src:n(m)+"/"+o.photo,alt:""},null,8,De)):(c(),u("img",Ie))]),e("div",Se,[e("h5",null,a(o.category_name),1)])]),e("td",null,[e("span",{class:"delete",onClick:s=>{d(f)?f.value=!0:f=!0,d(N)?N.value=o:N=o}},[p(r,{icon:["fas","trash"]})],8,Re),e("span",Fe,[e("span",{class:"edit",onClick:s=>{S.value=!0,d(A)?A.value=o:A=o,W()}},[p(r,{icon:["fas","pen-to-square"]})],8,Ne)])])]))),128))])])]))])],2),p(T,{visible:n(I),"onUpdate:visible":t[7]||(t[7]=o=>d(I)?I.value=o:null),modal:"",style:{width:"25rem"}},{container:V(({closeCallback:o})=>[e("div",{class:"dialog",dir:l.$i18n.locale==="ar"?"rtl":"ltr"},[e("h5",null,a(l.$i18n.locale==="ar"?"إضافة فئة جديدة":"Add New Category"),1),e("div",Pe,[e("div",null,[e("div",Ve,[U(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>d(C)?C.value=s:C=s),id:"priority",type:"number",autocomplete:"off",placeholder:l.$i18n.locale==="ar"?"الترتيب":"Priority",required:""},null,8,Be),[[D,n(C)]]),e("label",xe,a(l.$i18n.locale==="ar"?"الترتيب":"Priority"),1)]),e("div",qe,[U(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>d(R)?R.value=s:R=s),id:"titleAr",type:"text",autocomplete:"off",placeholder:l.$i18n.locale==="ar"?"الاسم باللغة العربية":"Name In Arabic",title:"Enter only letters and spaces",required:""},null,8,ze),[[D,n(R)]]),e("label",Me,a(l.$i18n.locale==="ar"?"الاسم باللغة العربية":"Name In Arabic"),1)]),e("div",Te,[U(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>d(F)?F.value=s:F=s),id:"titleEn",type:"text",autocomplete:"off",placeholder:l.$i18n.locale==="ar"?"الاسم باللغة الانجليزية":"Name In English",required:"",title:"Enter only letters and spaces"},null,8,Oe),[[D,n(F)]]),e("label",Ye,a(l.$i18n.locale==="ar"?"الاسم باللغة الانجليزية":"Name In English"),1)]),e("div",Ge,[e("div",Qe,[p(v,{mode:"basic",onSelect:Z,customUpload:"",maxFileSize:1e6,accept:"image/*",auto:"",class:"form-control p-button-outlined"}),n(E)?(c(),u("img",{key:0,src:n(E),alt:"Image",class:"shadow-md w-100 h-100 sm:w-64"},null,8,je)):q("",!0),n(E)?(c(),u("button",{key:1,class:"btn btn-danger clear",onClick:t[5]||(t[5]=Q(s=>{E.value=null,P.value=null},["prevent"]))},[p(r,{class:"xmark",icon:["fas","xmark"]})])):q("",!0)])])])]),e("div",He,[e("button",{class:"btn btn-secondary",onClick:o},a(l.$t("Close")),9,Ke),e("button",{class:"btn btn-success mx-2",onClick:t[6]||(t[6]=s=>J()),autofocus:""},a(l.$t("Add")),1)])],8,Le)]),_:1},8,["visible"]),p(T,{visible:n(S),"onUpdate:visible":t[13]||(t[13]=o=>d(S)?S.value=o:null),modal:"",style:{width:"25rem"}},{container:V(({closeCallback:o})=>[e("div",{class:"dialog",dir:l.$i18n.locale==="ar"?"rtl":"ltr"},[e("h5",null,a(l.$i18n.locale==="ar"?"تعديل فئة":"Edit Category"),1),e("div",Je,[e("div",null,[e("div",We,[U(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>d(k)?k.value=s:k=s),id:"editPriority",type:"number",autocomplete:"off",placeholder:l.$i18n.locale==="ar"?"الترتيب":"Priority",required:""},null,8,Xe),[[D,n(k)]]),e("label",el,a(l.$i18n.locale==="ar"?"الترتيب":"Priority"),1)]),e("div",ll,[U(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>d(g)?g.value=s:g=s),id:"edittitleAr",type:"text",autocomplete:"off",placeholder:l.$i18n.locale==="ar"?"الاسم باللغة العربية":"Name In Arabic",title:"Enter only letters and spaces",required:""},null,8,tl),[[D,n(g)]]),e("label",al,a(l.$i18n.locale==="ar"?"الاسم باللغة العربية":"Name In Arabic"),1)]),e("div",sl,[U(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>d($)?$.value=s:$=s),id:"edittitleEn",type:"text",autocomplete:"off",placeholder:l.$i18n.locale==="ar"?"الاسم باللغة الانجليزية":"Name In English",required:"",title:"Enter only letters and spaces"},null,8,ol),[[D,n($)]]),e("label",nl,a(l.$i18n.locale==="ar"?"الاسم باللغة الانجليزية":"Name In English"),1)]),e("div",il,[e("div",rl,[p(v,{mode:"basic",onSelect:K,customUpload:"",maxFileSize:1e6,accept:"image/*",auto:"",class:"form-control p-button-outlined"}),n(_)?(c(),u("img",{key:0,src:n(_),alt:"Image",class:"shadow-md w-100 h-100 sm:w-64"},null,8,dl)):q("",!0),n(_)?(c(),u("button",{key:1,class:"btn btn-danger clear",onClick:t[11]||(t[11]=Q(s=>{_.value=null,w.value=null},["prevent"]))},[p(r,{class:"xmark",icon:["fas","xmark"]})])):q("",!0)])])])]),e("div",cl,[e("button",{class:"btn btn-secondary",onClick:o},a(l.$t("Close")),9,ul),e("button",{class:"btn btn-success mx-2",onClick:t[12]||(t[12]=s=>X()),autofocus:""},a(l.$t("Edit")),1)])],8,Ze)]),_:1},8,["visible"]),p(ee,{isOpen:n(f),onUpdateIsOpen:j},{header:V(()=>[e("h4",null,a(l.$i18n.locale==="ar"?"تأكيد الحذف":"Confirm Delete"),1)]),content:V(()=>[e("p",null,a(l.$i18n.locale==="ar"?"هل أنت متأكد من أنك تريد حذف":"Are You Sure You Want To Delete")+' "'+a(n(N).category_name)+'"'+a(l.$i18n.locale==="ar"?"؟":"?"),1)]),footer:V(()=>[e("button",{class:"btn btn-secondary",onClick:t[14]||(t[14]=o=>d(f)?f.value=!1:f=!1)},a(l.$t("Close")),1),e("button",{class:"btn btn-danger",onClick:t[15]||(t[15]=o=>H())},a(l.$t("Delete")),1)]),_:1},8,["isOpen"])],64)}}},Il=ae(pl,[["__scopeId","data-v-e958c56a"]]);export{Il as default};
