import{_ as V}from"./B0waXuRe.js";import{_ as J}from"./CRYH6EUk.js";import{_ as Q}from"./BLbuQK5h.js";import{_ as W,u as X,b as q,a as z,c as j,d as H}from"./BACvjOH3.js";import{a as p,ae as K,k as Z,a3 as c,D as d,a8 as a,a0 as l,Y as N,M as u,a4 as y,Q as ee,a1 as ae,u as h,z as C,F as O,af as se,ag as te,w as b,a6 as le,a7 as ne}from"./BUNOv-RT.js";import{u as m}from"./Bby8bbry.js";import{_ as oe}from"./Bdsl2Me0.js";import{u as T,w as ie}from"./D5JNrnKm.js";const ce=k=>(le("data-v-ebb9f356"),k=k(),ne(),k),de={class:"title-container"},re={class:"head-title"},ue={class:"header4"},me={class:"options"},_e={class:"d-flex flex-column-reverse mx-2"},pe=["placeholder"],he={class:"table-responsive"},fe={key:0,class:"loading"},be=ce(()=>a("img",{src:j,alt:""},null,-1)),ge=[be],ve={key:1,class:"product-tabel"},$e={class:"d-flex align-items-center"},ye={class:"product-img"},ke=["src"],we={key:1,src:oe,alt:""},Ce={class:"product-info d-flex flex-column align-items-start"},Pe={class:"fw-bold"},Le={class:"badge rounded-pill bg-primary me-1"},Se={class:"badge rounded-pill bg-secondary me-1"},De={key:0,class:"badge rounded-pill bg-success me-1"},Ee={key:1,class:"badge rounded-pill bg-danger me-1"},Re={key:0,class:"badge rounded-pill bg-success me-1"},Ue={key:1,class:"badge rounded-pill bg-danger me-1"},Ae=["onClick"],Ne={class:"edit"},Te={__name:"ListProduct",async setup(k){let w,x;const{public:{api:r,apiBase:i}}=z(),{locale:g}=X(),{$awn:I}=H();let P=p(!1),L=p();const S=async()=>{if(P.value=!0,g.value==="ar"){const{data:e,pending:s}=await m(`${r.GetAllPlants}`,{credentials:"include",baseURL:i,credentials:"include",headers:{"accept-language":"ar"}},"$8A8PffWCdr");b(()=>{e.value&&(L.value=e.value)})}else{const{data:e,pending:s}=await m(`${r.GetAllPlants}`,{credentials:"include",baseURL:i,credentials:"include",headers:{"accept-language":"en"}},"$ltvuhMbEk2");b(()=>{e.value&&(L.value=e.value)})}P.value=!1};S();let D=p();(async()=>{if(g.value==="ar"){const{data:e,pending:s}=await m(`${r.findAllCategories}`,{credentials:"include",baseURL:i,headers:{"accept-language":"ar"}},"$Ip1Tp9y4fL");b(()=>{e.value&&(D.value=e.value)})}else{const{data:e,pending:s}=await m(`${r.findAllCategories}`,{credentials:"include",baseURL:i,headers:{"accept-language":"en"}},"$JX1bQhQzOq");b(()=>{e.value&&(D.value=e.value)})}})();let E=p();(async()=>{if(g.value==="ar"){const{data:e,pending:s}=await m(`${r.GetSubCat}`,{credentials:"include",baseURL:i,headers:{"accept-language":"ar"}},"$AYmuxKNTdR");b(()=>{e.value&&(E.value=e.value)})}else{const{data:e,pending:s}=await m(`${r.GetSubCat}`,{credentials:"include",baseURL:i,headers:{"accept-language":"en"}},"$RfGEdJ5XOM");b(()=>{e.value&&(E.value=e.value)})}})(),[w,x]=K(()=>m(r.GetSubCat,{baseURL:i,credentials:"include",method:"GET"},"$sha7XrrDWf")),w=await w,x();const R=e=>{var o,t;let s=(o=D.value)==null?void 0:o.filter($=>$.id===e);if(s)return(t=s[0])==null?void 0:t.category_name},U=e=>{var o,t;let s=(o=E.value)==null?void 0:o.filter($=>$.id===e);if(s)return(t=s[0])==null?void 0:t.subcategory_name};let f=p(),_=p(!1);const M=e=>{_.value=e};let v=p("");const A=Z(()=>{var e;return(e=L.value)==null?void 0:e.filter(s=>s.plant_name.toLowerCase().includes(v.value.toLowerCase()))}),Y=async e=>{await m(`${r.RemovePlantImage}/${e}`,{credentials:"include",baseURL:i,method:"DELETE"},"$OSXQxvLi7V")},B=async()=>{var s;const{data:e}=await m(`${r.GetPlantById}/${f.value.id}`,{credentials:"include",baseURL:i,method:"GET"},"$FdJDdU6ZfH");await((s=e.value[0].photos)==null?void 0:s.map(async o=>{await Y(o.photo_id)})),await m(`${r.DeletePlant}/${f.value.id}`,{credentials:"include",baseURL:i,method:"DELETE"},"$ElredUOLhW"),S(),_.value=!1,g.value==="en"?I.success("Plant Deleted Successfully",{durations:{global:5e3}}):I.success("تم حذف النبات بنجاح",{durations:{global:5e3}})},F=()=>{let e;g.value==="en"?e=A.value.map(t=>({Name:t.plant_name,Price:t.price,Categories:R(t.category_id),Sub_Category:U(t.subcategory_id),New:t.newest?"Yes":"No",Recommended:t.recommended?"Yes":"No"})):e=A.value.map(t=>({الاسم:t.plant_name,السعر:t.price,الفئة:R(t.category_id),الفئة_الفرعية:U(t.subcategory_id),جديد:t.newest?"نعم":"لا",مقترح:t.recommended?"نعم":"لا"}));const s=T.json_to_sheet(e),o=T.book_new();T.book_append_sheet(o,s,"Products"),ie(o,"Products.xlsx")};return(e,s)=>{const o=V,t=J,$=Q;return c(),d(O,null,[a("div",{class:te(["contain",("useSidebar"in e?e.useSidebar:h(q))().value?"shrink":""])},[a("div",de,[a("div",re,[a("h4",ue,l(e.$i18n.locale==="ar"?"قائمة النباتات":"Plant List"),1),a("p",null,[N(l(e.$i18n.locale==="ar"?"إضافة نبات جديد من":"Add new Plant from")+" ",1),u(o,{to:"/admin/AddProduct"},{default:y(()=>[N(l(e.$i18n.locale==="ar"?"هنا":"here"),1)]),_:1})])]),a("div",me,[a("div",_e,[ee(a("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>C(v)?v.value=n:v=n),id:"price",type:"text",required:"",placeholder:e.$i18n.locale==="ar"?"ابحث":"Search"},null,8,pe),[[ae,h(v)]])]),a("div",{class:"reload btn btn-success mx-1",onClick:s[1]||(s[1]=n=>S())},[u(t,{icon:["fas","rotate-right"]}),N(" "+l(e.$i18n.locale==="ar"?"إعادة تحميل":"Reload"),1)]),a("div",{class:"reload btn btn-success mx-1",onClick:F},l(e.$i18n.locale==="ar"?"تصدير":"Export"),1)])]),a("div",he,[h(P)?(c(),d("div",fe,ge)):(c(),d("div",ve,[a("table",null,[a("thead",null,[a("tr",null,[a("th",null,l(e.$i18n.locale==="ar"?"الاسم":"Name"),1),a("th",null,l(e.$i18n.locale==="ar"?"السعر":"Price"),1),a("th",null,l(e.$i18n.locale==="ar"?"الفئة":"Category"),1),a("th",null,l(e.$i18n.locale==="ar"?"الفئة الفرعية":"Sub Category"),1),a("th",null,l(e.$i18n.locale==="ar"?"جديد":"New"),1),a("th",null,l(e.$i18n.locale==="ar"?"مقترح":"Recommended"),1),a("th",null,l(e.$i18n.locale==="ar"?"تعديل":"Edit"),1)])]),a("tbody",null,[(c(!0),d(O,null,se(h(A),n=>{var G;return c(),d("tr",{class:"rows",key:n.id},[a("td",$e,[a("div",ye,[(G=n==null?void 0:n.photos)!=null&&G.photoPath?(c(),d("img",{key:0,src:h(i)+"/"+n.photos.photoPath,alt:""},null,8,ke)):(c(),d("img",we))]),a("div",Ce,[a("h5",null,l(n.plant_name),1)])]),a("td",Pe,"JOD "+l(n.price),1),a("td",null,[a("p",Le,l(R(n.category_id)),1)]),a("td",null,[a("p",Se,l(U(n.subcategory_id)),1)]),a("td",null,[n.newest?(c(),d("p",De,[u(t,{class:"check",icon:["fas","check"]})])):(c(),d("p",Ee,[u(t,{class:"check",icon:["fas","xmark"]})]))]),a("td",null,[n.recommended?(c(),d("p",Re,[u(t,{class:"check",icon:["fas","check"]})])):(c(),d("p",Ue,[u(t,{class:"check",icon:["fas","xmark"]})]))]),a("td",null,[a("span",{class:"delete",onClick:Ge=>{C(_)?_.value=!0:_=!0,C(f)?f.value=n:f=n}},[u(t,{icon:["fas","trash"]})],8,Ae),u(o,{to:`/admin/EditProduct/${n.id}`,class:"edit-link"},{default:y(()=>[a("span",Ne,[u(t,{icon:["fas","pen-to-square"]})])]),_:2},1032,["to"])])])}),128))])])]))])],2),u($,{isOpen:h(_),onUpdateIsOpen:M},{header:y(()=>[a("h4",null,l(e.$i18n.locale==="ar"?"تأكيد الحذف":"Confirm Delete"),1)]),content:y(()=>[a("p",null,l(e.$i18n.locale==="ar"?"هل أنت متأكد من أنك تريد حذف":"Are You Sure You Want To Delete")+' "'+l(h(f).plant_name)+'"'+l(e.$i18n.locale==="ar"?"؟":"?"),1)]),footer:y(()=>[a("button",{class:"btn btn-secondary",onClick:s[2]||(s[2]=n=>C(_)?_.value=!1:_=!1)},l(e.$t("Close")),1),a("button",{class:"btn btn-danger",onClick:s[3]||(s[3]=n=>B())},l(e.$t("Delete")),1)]),_:1},8,["isOpen"])],64)}}},We=W(Te,[["__scopeId","data-v-ebb9f356"]]);export{We as default};
