import{_ as oe}from"./BbA-o76e.js";import{_ as ne}from"./C3_fBZW9.js";import{_ as ie,u as de,b as ce,a as re,c as ue,d as pe}from"./B-xVLMgY.js";import{a as i,a3 as d,D as c,a8 as a,a0 as s,M as r,Y as W,u as o,F as Y,af as me,ag as M,a4 as b,z as m,w as q,Q as B,a1 as G,a5 as x,$ as H,a6 as ve,a7 as fe}from"./Bynz-MEc.js";import{u as g}from"./BiZJ-hRq.js";import{s as be}from"./DpQzEydf.js";import{s as ge}from"./99Vxj8jW.js";import{s as _e}from"./CPwBJvdw.js";import{_ as he}from"./TvlYamwF.js";import"./Df-GVvyW.js";import"./DLGQuXV3.js";import"./Cmc8rz6b.js";import"./wdptxeXm.js";import"./D1DtqsuL.js";import"./Bj7uUH7J.js";import"./DP9E7vwK.js";import"./DwlXvmMR.js";import"./DvB5914a.js";import"./iYswvBTg.js";const ye=T=>(ve("data-v-e21ccfed"),T=T(),fe(),T),$e={class:"title-container"},Ce={class:"head-title"},ke={class:"header4"},we={class:"options"},Se={class:"table-responsive"},Ae={key:0,class:"loading"},Ue=ye(()=>a("img",{src:ue,alt:""},null,-1)),Ee=[Ue],De={key:1,class:"cat-tabel"},Ie={class:"d-flex align-items-center"},Re={class:"cat-img mx-2"},Ne=["src"],Ve={key:1,src:he,alt:""},Fe={class:"cat-info d-flex flex-column align-items-start"},Le=["onClick"],Me={class:"edit-link"},Te=["onClick"],ze=["dir"],qe={class:"content"},Be={key:0,class:"flex items-center"},Ge={key:1},xe={class:"d-flex flex-column-reverse mb-3"},je=["placeholder"],Oe={for:"titleAr"},Qe={class:"d-flex flex-column-reverse mb-3"},Ke=["placeholder"],We={for:"titleEn"},Ye={class:"drop-area my-4"},He={class:"upload-box"},Xe=["src"],Je={class:"mt-5 d-flex w-100 justify-content-end"},Ze=["onClick"],Pe=["dir"],ea={class:"content"},aa={key:0,class:"flex items-center"},la={key:1},ta={class:"d-flex flex-column-reverse mb-3"},sa=["placeholder"],oa={for:"edittitleAr"},na={class:"d-flex flex-column-reverse mb-3"},ia=["placeholder"],da={for:"edittitleEn"},ca={class:"drop-area my-4"},ra={class:"upload-box"},ua=["src"],pa={class:"mt-5 d-flex w-100 justify-content-end"},ma=["onClick"],va={__name:"SubCategory",setup(T){const{public:{api:v,apiBase:u}}=re(),{locale:S}=de(),{$awn:h}=pe();let A=i(),U=i(),z=i();(async()=>{if(S.value==="ar"){const{data:e,pending:l}=await g(`${v.findAllCategories}`,{credentials:"include",baseURL:u,headers:{"accept-language":"ar"}},"$F2Utb1El3i");q(()=>{e.value&&(z.value=e.value)})}else{const{data:e,pending:l}=await g(`${v.findAllCategories}`,{credentials:"include",baseURL:u,headers:{"accept-language":"en"}},"$Ugztk8WK76");q(()=>{e.value&&(z.value=e.value)})}})();const E=i(!1),D=i(!1);let I=i(),R=i();i();let y=i(),$=i(),X=i(),N=i(),f=i(!1);const J=e=>{f.value=e};let j=i(!1),O=i();const V=async()=>{if(j.value=!0,S.value==="ar"){const{data:e,pending:l}=await g(`${v.GetSubCat}`,{credentials:"include",baseURL:u,headers:{"accept-language":"ar"}},"$3yzCQ6rIAg");q(()=>{e.value&&(O.value=e.value)})}else{const{data:e,pending:l}=await g(`${v.GetSubCat}`,{credentials:"include",baseURL:u,headers:{"accept-language":"en"}},"$p08zZKGg5X");q(()=>{e.value&&(O.value=e.value)})}j.value=!1};V();const Z=async()=>{await g(`${v.RemoveSubCat}/${N.value.id}`,{credentials:"include",baseURL:u,method:"DELETE"},"$okIraKtXHU"),V(),f.value=!1,S.value==="en"?h.success("Category Deleted Successfully",{durations:{global:5e3}}):h.success("تم حذف الفئة بنجاح",{durations:{global:5e3}})},_=i(null),C=i(null);function P(e){const l=e.files[0];C.value=l;const p=new FileReader;p.onload=async w=>{_.value=w.target.result},p.readAsDataURL(l)}const k=i(null),F=i(null);function ee(e){const l=e.files[0];F.value=l;const p=new FileReader;p.onload=async w=>{k.value=w.target.result},p.readAsDataURL(l)}const ae=async()=>{const e=new FormData;e.append("subcategory_name_AR",I.value),e.append("subcategory_name_EN",R.value),e.append("category_id",A.value.id),F.value&&e.append("photoPath",F.value),await g(v.AddSubCat,{baseURL:u,method:"POST",credentials:"include",body:e},"$jfQ0z6t5mj"),V(),E.value=!1,k.value=null,F.value=null,S.value==="en"?h.success("Category Added Successfully",{durations:{global:5e3}}):h.success("تم إضافة الفئة بنجاح",{durations:{global:5e3}})},le=async()=>{const{data:e}=await g(`${v.GetSubById}/${U.value.id}`,{credentials:"include",baseURL:u,headers:{"accept-language":"ar"}},"$oQHMdT1cbS"),{data:l}=await g(`${v.GetSubById}/${L.value.id}`,{credentials:"include",baseURL:u,headers:{"accept-language":"en"}},"$WTMPNnG2hT");$.value=l.value.category_name,y.value=e.value.category_name,C.value=u+"/"+l.value.photo,_.value=u+"/"+l.value.photo};let L=i();const te=async()=>{const e=new FormData;e.append("subcategory_name_AR",y.value),e.append("subcategory_name_EN",$.value),e.append("category_id",X.value),C.value&&e.append("photoPath",C.value),await g(`${v.UpdateSubCat}/${L.value.id}`,{credentials:"include",body:e,baseURL:u,method:"PUT"},"$uVql0VytJe"),V(),D.value=!1,_.value=null,C.value=null,S.value==="en"?h.success("Category Edited Successfully",{durations:{global:5e3}}):h.success("تم تعديل الفئة بنجاح",{durations:{global:5e3}})};return(e,l)=>{const p=oe,w=_e,Q=ge,K=be,se=ne;return d(),c(Y,null,[a("div",{class:M(["contain",("useSidebar"in e?e.useSidebar:o(ce))().value?"shrink":""])},[a("div",$e,[a("div",Ce,[a("h4",ke,s(e.$i18n.locale==="ar"?"قائمة الفئات":"Categories List"),1)]),a("div",we,[a("div",{class:"reload btn btn-success mx-2",onClick:l[0]||(l[0]=n=>E.value=!0)},[r(p,{icon:["fas","plus"]}),W(" "+s(e.$i18n.locale==="ar"?"إضافة":"Add"),1)]),a("div",{class:"reload btn btn-success",onClick:l[1]||(l[1]=n=>V())},[r(p,{icon:["fas","rotate-right"]}),W(" "+s(e.$i18n.locale==="ar"?"إعادة تحميل":"Reload"),1)])])]),a("div",Se,[o(j)?(d(),c("div",Ae,Ee)):(d(),c("div",De,[a("table",null,[a("thead",null,[a("tr",null,[a("th",null,s(e.$i18n.locale==="ar"?"الاسم":"Name"),1),a("th",null,s(e.$i18n.locale==="ar"?"تعديل":"Edit"),1)])]),a("tbody",null,[(d(!0),c(Y,null,me(o(O),n=>(d(),c("tr",{class:"rows",key:n.id},[a("td",Ie,[a("div",Re,[n.photo?(d(),c("img",{key:0,src:o(u)+"/"+n.photo,alt:""},null,8,Ne)):(d(),c("img",Ve))]),a("div",Fe,[a("h5",null,s(n.subcategory_name),1)])]),a("td",null,[a("span",{class:"delete",onClick:t=>{m(f)?f.value=!0:f=!0,m(N)?N.value=n:N=n}},[r(p,{icon:["fas","trash"]})],8,Le),a("span",Me,[a("span",{class:"edit",onClick:t=>{D.value=!0,m(L)?L.value=n:L=n,le()}},[r(p,{icon:["fas","pen-to-square"]})],8,Te)])])]))),128))])])]))])],2),r(K,{visible:o(E),"onUpdate:visible":l[7]||(l[7]=n=>m(E)?E.value=n:null),modal:"",style:{width:"25rem"}},{container:b(({closeCallback:n})=>[a("div",{class:"dialog",dir:e.$i18n.locale==="ar"?"rtl":"ltr"},[a("h5",null,s(e.$i18n.locale==="ar"?"إضافة فئة جديدة":"Add New Category"),1),a("div",qe,[a("div",null,[r(w,{modelValue:o(A),"onUpdate:modelValue":l[2]||(l[2]=t=>m(A)?A.value=t:A=t),options:o(z),placeholder:e.$i18n.locale==="ar"?"اختار فئة":"Select A Category",class:"w-full md:w-56 select"},{option:b(t=>[a("div",{class:M(["d-flex align-items-center",e.$i18n.locale==="ar"?"selectAr":""])},[a("div",null,s((e.$i18n.locale==="ar",t.option.category_name)),1)],2)]),value:b(t=>[t.value?(d(),c("div",Be,[a("div",{class:M(["d-flex align-items-center",e.$i18n.locale==="ar"?"selectAr":""])},[a("div",null,s((e.$i18n.locale==="ar",t.value.category_name)),1)],2)])):(d(),c("span",Ge,s(t.placeholder),1))]),_:1},8,["modelValue","options","placeholder"]),a("div",xe,[B(a("input",{"onUpdate:modelValue":l[3]||(l[3]=t=>m(I)?I.value=t:I=t),id:"titleAr",type:"text",autocomplete:"off",placeholder:e.$i18n.locale==="ar"?"الاسم باللغة العربية":"Name In Arabic",title:"Enter only letters and spaces",required:""},null,8,je),[[G,o(I)]]),a("label",Oe,s(e.$i18n.locale==="ar"?"الاسم باللغة العربية":"Name In Arabic"),1)]),a("div",Qe,[B(a("input",{"onUpdate:modelValue":l[4]||(l[4]=t=>m(R)?R.value=t:R=t),id:"titleEn",type:"text",autocomplete:"off",placeholder:e.$i18n.locale==="ar"?"الاسم باللغة الانجليزية":"Name In English",required:"",title:"Enter only letters and spaces"},null,8,Ke),[[G,o(R)]]),a("label",We,s(e.$i18n.locale==="ar"?"الاسم باللغة الانجليزية":"Name In English"),1)]),a("div",Ye,[a("div",He,[r(Q,{mode:"basic",onSelect:ee,customUpload:"",maxFileSize:1e6,accept:"image/*",auto:"",class:"form-control p-button-outlined"}),o(k)?(d(),c("img",{key:0,src:o(k),alt:"Image",class:"shadow-md w-100 h-100 sm:w-64"},null,8,Xe)):x("",!0),o(k)?(d(),c("button",{key:1,class:"btn btn-danger clear",onClick:l[5]||(l[5]=H(t=>{k.value=null,F.value=null},["prevent"]))},[r(p,{class:"xmark",icon:["fas","xmark"]})])):x("",!0)])])])]),a("div",Je,[a("button",{class:"btn btn-secondary",onClick:n},s(e.$t("Close")),9,Ze),a("button",{class:"btn btn-success mx-2",onClick:l[6]||(l[6]=t=>ae()),autofocus:""},s(e.$t("Add")),1)])],8,ze)]),_:1},8,["visible"]),r(K,{visible:o(D),"onUpdate:visible":l[13]||(l[13]=n=>m(D)?D.value=n:null),modal:"",style:{width:"25rem"}},{container:b(({closeCallback:n})=>[a("div",{class:"dialog",dir:e.$i18n.locale==="ar"?"rtl":"ltr"},[a("h5",null,s(e.$i18n.locale==="ar"?"تعديل فئة":"Edit Category"),1),a("div",ea,[a("div",null,[r(w,{modelValue:o(U),"onUpdate:modelValue":l[8]||(l[8]=t=>m(U)?U.value=t:U=t),options:o(z),placeholder:e.$i18n.locale==="ar"?"اختار فئة":"Select A Category",class:"w-full md:w-56 select"},{option:b(t=>[a("div",{class:M(["d-flex align-items-center",e.$i18n.locale==="ar"?"selectAr":""])},[a("div",null,s((e.$i18n.locale==="ar",t.option.category_name)),1)],2)]),value:b(t=>[t.value?(d(),c("div",aa,[a("div",{class:M(["d-flex align-items-center",e.$i18n.locale==="ar"?"selectAr":""])},[a("div",null,s((e.$i18n.locale==="ar",t.value.category_name)),1)],2)])):(d(),c("span",la,s(t.placeholder),1))]),_:1},8,["modelValue","options","placeholder"]),a("div",ta,[B(a("input",{"onUpdate:modelValue":l[9]||(l[9]=t=>m(y)?y.value=t:y=t),id:"edittitleAr",type:"text",autocomplete:"off",placeholder:e.$i18n.locale==="ar"?"الاسم باللغة العربية":"Name In Arabic",title:"Enter only letters and spaces",required:""},null,8,sa),[[G,o(y)]]),a("label",oa,s(e.$i18n.locale==="ar"?"الاسم باللغة العربية":"Name In Arabic"),1)]),a("div",na,[B(a("input",{"onUpdate:modelValue":l[10]||(l[10]=t=>m($)?$.value=t:$=t),id:"edittitleEn",type:"text",autocomplete:"off",placeholder:e.$i18n.locale==="ar"?"الاسم باللغة الانجليزية":"Name In English",required:"",title:"Enter only letters and spaces"},null,8,ia),[[G,o($)]]),a("label",da,s(e.$i18n.locale==="ar"?"الاسم باللغة الانجليزية":"Name In English"),1)]),a("div",ca,[a("div",ra,[r(Q,{mode:"basic",onSelect:P,customUpload:"",maxFileSize:1e6,accept:"image/*",auto:"",class:"form-control p-button-outlined"}),o(_)?(d(),c("img",{key:0,src:o(_),alt:"Image",class:"shadow-md w-100 h-100 sm:w-64"},null,8,ua)):x("",!0),o(_)?(d(),c("button",{key:1,class:"btn btn-danger clear",onClick:l[11]||(l[11]=H(t=>{_.value=null,C.value=null},["prevent"]))},[r(p,{class:"xmark",icon:["fas","xmark"]})])):x("",!0)])])])]),a("div",pa,[a("button",{class:"btn btn-secondary",onClick:n},s(e.$t("Close")),9,ma),a("button",{class:"btn btn-success mx-2",onClick:l[12]||(l[12]=t=>te()),autofocus:""},s(e.$t("Edit")),1)])],8,Pe)]),_:1},8,["visible"]),r(se,{isOpen:o(f),onUpdateIsOpen:J},{header:b(()=>[a("h4",null,s(e.$i18n.locale==="ar"?"تأكيد الحذف":"Confirm Delete"),1)]),content:b(()=>[a("p",null,s(e.$i18n.locale==="ar"?"هل أنت متأكد من أنك تريد حذف":"Are You Sure You Want To Delete")+' "'+s(o(N).category_name)+'"'+s(e.$i18n.locale==="ar"?"؟":"?"),1)]),footer:b(()=>[a("button",{class:"btn btn-secondary",onClick:l[14]||(l[14]=n=>m(f)?f.value=!1:f=!1)},s(e.$t("Close")),1),a("button",{class:"btn btn-danger",onClick:l[15]||(l[15]=n=>Z())},s(e.$t("Delete")),1)]),_:1},8,["isOpen"])],64)}}},La=ie(va,[["__scopeId","data-v-e21ccfed"]]);export{La as default};
