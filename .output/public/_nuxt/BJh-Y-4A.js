import{_ as yt}from"./GB26Fwix.js";import{_ as vt,u as gt,L as ft,a as mt}from"./DC6DYEp4.js";import{u as wt}from"./BhYxPRj1.js";import{_ as zt}from"./qTkJAKL0.js";import{j as L,a as m,r as K,b as J,y as q,Z as X,k,a3 as d,D as x,u as l,ab as _,a5 as R,N as xt,V as Y,ai as F,as as Z,a4 as E,M as P,O as ot,a8 as y,F as lt,af as at,ag as N,a0 as ut,n as D,f as M,L as st,ae as St,o as _t,z as Lt,ak as H,at as G,a6 as kt,a7 as bt}from"./Bynz-MEc.js";var Et=Object.defineProperty,Tt=(n,t,e)=>t in n?Et(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,o=(n,t,e)=>(Tt(n,typeof t!="symbol"?t+"":t,e),e);const Rt=(n,t)=>{const e=n.__vccOpts||n;for(const[s,i]of t)e[s]=i;return e},Ct={},Ot={type:"button",class:"flux-button",style:{outline:"0"}},Pt={viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},At=y("circle",{cx:"50",cy:"50",r:"50"},null,-1),$t={viewBox:"-20 -20 140 140"};function Vt(n,t){return d(),x("button",Ot,[(d(),x("svg",Pt,[At,(d(),x("svg",$t,[F(n.$slots,"default")]))]))])}const W=Rt(Ct,[["render",Vt]]),Ft=({width:n,height:t})=>n/t;class it{constructor({top:t=null,left:e=null}={top:null,left:null}){o(this,"top",m(null)),o(this,"left",m(null)),this.update({top:t,left:e})}reset(){this.top.value=null,this.left.value=null}isValid(){return![this.top.value,this.left.value].includes(null)}update({top:t,left:e}){this.top.value=t??null,this.left.value=e??null}toValue(){const t={top:void 0,left:void 0};return this.top.value!==null&&(t.top=this.top.value),this.left.value!==null&&(t.left=this.left.value),t}toPx(){if(!this.isValid())throw new RangeError("Invalid position in pixels");return{top:this.top.value.toString()+"px",left:this.left.value.toString()+"px"}}}class Bt{constructor(t,e,s=O.fill,i=null,a,u,c){o(this,"src"),o(this,"loader",null),o(this,"errorMessage"),o(this,"status",m(B.notLoaded)),o(this,"realSize",new C),o(this,"displaySize",new C),o(this,"caption",""),o(this,"resizeType"),o(this,"backgroundColor",null),o(this,"display"),o(this,"transition"),o(this,"isLoading",()=>this.status.value===B.loading),o(this,"isLoaded",()=>this.status.value===B.loaded),o(this,"isError",()=>this.status.value===B.error),o(this,"resizeProps",k(()=>this.calcResizeProps(this.displaySize))),this.src=t,this.caption=e,this.resizeType=s,this.backgroundColor=i,this.display=a,this.transition=u,this.errorMessage=c}calcResizeProps(t){if([t.isValid(),this.realSize.isValid()].includes(!1))return{};const e=new Mt(this.realSize),{size:s,position:i}=e.resizeTo(t,this.resizeType);return{...s.toValue(),...i.toValue()}}getResizeProps(t,e){const s={width:0,height:0,top:0,left:0};return this.displaySize.isValid()||this.displaySize.update(t.toValue()),Object.assign(s,t.equals(this.displaySize)?this.resizeProps.value:this.calcResizeProps(t)),e!==void 0&&(s.top-=e.top.value||0,s.left-=e.left.value||0),s}}class It extends Bt{constructor(t,e="",s=O.fill,i=null){const a={component:rt,props:{}},u={component:rt,props:{}},c=`Image ${t} could not be loaded`;super(t,e,s,i,a,u,c)}load(){return this.loader!==null?this.loader:(this.loader=new Promise((t,e)=>{this.status.value=B.loading;const s=new Image;s.onload=()=>this.onLoad(s,t),s.onerror=()=>this.onError(e),s.src=this.src}),this.loader)}onLoad(t,e){this.realSize=new C({width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}),this.status.value=B.loaded,e()}onError(t){this.status.value=B.error,t(this.errorMessage)}}var ht=(n=>(n.notLoaded="notLoaded",n.loading="loading",n.loaded="loaded",n.error="error",n))(ht||{});const B=ht;var ct=(n=>(n.fill="fill",n.fit="fit",n))(ct||{});const O=ct,nt=n=>n>=1?"landscape":"portrait";class Mt{constructor(t){if(o(this,"realSize"),o(this,"realAspectRatio"),o(this,"realOrientation"),t.isValid()===!1)throw new RangeError("Invalid real size");this.realSize=t,this.realAspectRatio=this.realSize.getAspectRatio(),this.realOrientation=nt(this.realAspectRatio)}resizeTo(t,e){if(t.isValid()===!1)throw new RangeError("Invalid size to resize");const s=t.getAspectRatio(),i=nt(s),a=this.getAdaptedSize(t,s,i,e),u=this.getAdaptedPosition(t,s,a,e);return{size:a,position:u}}getAdaptedSize(t,e,s,i){return s==="landscape"&&this.realOrientation==="portrait"&&i===O.fill?this.getAdaptedSizeByWith(t):s==="landscape"&&this.realOrientation==="landscape"&&e>=this.realAspectRatio&&i===O.fill?this.getAdaptedSizeByWith(t):s==="landscape"&&this.realOrientation==="landscape"&&e<this.realAspectRatio&&i===O.fit?this.getAdaptedSizeByWith(t):s==="portrait"&&this.realOrientation==="landscape"&&i===O.fit?this.getAdaptedSizeByWith(t):s==="portrait"&&this.realOrientation==="portrait"&&e>this.realAspectRatio&&i===O.fill?this.getAdaptedSizeByWith(t):s==="portrait"&&this.realOrientation==="portrait"&&e<=this.realAspectRatio&&i===O.fit?this.getAdaptedSizeByWith(t):this.getAdaptedSizeByHeight(t)}getAdaptedSizeByWith(t){return new C({width:t.width.value,height:t.width.value/this.realAspectRatio})}getAdaptedSizeByHeight(t){return new C({width:this.realAspectRatio*t.height.value,height:t.height.value})}getAdaptedPosition(t,e,s,i){return this.realAspectRatio<=e&&i===O.fill?this.getAdaptedPositionVertically(t,s):this.realAspectRatio>e&&i===O.fit?this.getAdaptedPositionVertically(t,s):this.getAdaptedPositionHorizontally(t,s)}getAdaptedPositionVertically(t,e){return new it({top:(t.height.value-e.height.value)/2,left:0})}getAdaptedPositionHorizontally(t,e){return new it({top:0,left:(t.width.value-e.width.value)/2})}}class Nt{constructor(t,e,s,i,a,u,c,h){o(this,"rscs",[]),o(this,"counter",{success:0,error:0,total:0}),o(this,"toPreload"),o(this,"preLoading",[]),o(this,"lazyLoading",[]),o(this,"progress",m(0)),o(this,"displaySize"),o(this,"onPreloadStart"),o(this,"onPreloadEnd"),o(this,"onLazyLoadStart"),o(this,"onLazyLoadEnd"),o(this,"isCancelled",!1),o(this,"reject"),this.rscs=t,this.toPreload=e>t.length?t.length:e,this.displaySize=s,this.onPreloadStart=i,this.onPreloadEnd=a,this.onLazyLoadStart=u,this.onLazyLoadEnd=c,this.reject=h,this.preloadStart()}preloadStart(){this.onPreloadStart();const{counter:t}=this,e=this.rscs.slice(t.total,t.total+this.toPreload-t.success);this.preLoading=this.preLoading.concat(e),e.forEach(s=>this.load(s))}preloadEnd(){const{counter:t,toPreload:e}=this;if(t.success<e&&t.total<this.rscs.length){this.preloadStart();return}const s=this.preLoading.filter(i=>i.resource.isLoaded());this.onPreloadEnd(s),this.preLoading.length=0,t.total<this.rscs.length&&this.lazyLoadStart()}lazyLoadStart(){this.onLazyLoadStart(),this.lazyLoading=this.rscs.slice(this.counter.total),this.lazyLoading.forEach(t=>this.load(t))}lazyLoadEnd(){const t=this.lazyLoading.filter(e=>e.resource.isLoaded());this.onLazyLoadEnd(t),this.lazyLoading.length=0}load(t){t.resource.load().then(()=>{this.loadSuccess(t)}).catch(e=>{this.loadError(e)}).finally(()=>{this.counter.total++,!this.isCancelled&&(this.preLoading.length!==0&&this.updateProgress(),this.counter.total===this.toPreload?this.preloadEnd():this.counter.total===this.rscs.length&&this.lazyLoadEnd())})}loadSuccess(t){this.counter.success++,!this.isCancelled&&t.resource.displaySize.update(this.displaySize.toValue())}loadError(t){this.counter.error++,!this.isCancelled&&console.error(t)}updateProgress(){this.progress.value=Math.ceil(this.counter.success*100/this.toPreload)||0}hasFinished(){return this.counter.total===this.rscs.length}cancel(){this.isCancelled=!0,this.reject("Resources loading cancelled",this.rscs)}}class C{constructor({width:t=null,height:e=null}={width:null,height:null}){o(this,"width",m(null)),o(this,"height",m(null)),this.update({width:t,height:e})}reset(){this.width.value=null,this.height.value=null}isValid(){return![this.width.value,this.height.value].includes(null)}update({width:t,height:e}){this.width.value=t??null,this.height.value=e??null}getAspectRatio(){if(!this.isValid())throw new RangeError("Could not get aspect ratio due to invalid size");return Ft(this.toValue())}clone(){return new C(this.toValue())}equals(t){return!(this.width.value!==t.width.value||this.height.value!==t.height.value)}toValue(){const t={};return this.width.value!==null&&(t.width=this.width.value),this.height.value!==null&&(t.height=this.height.value),t}toPx(){if(!this.isValid())throw new RangeError("Invalid size in pixels");return{width:this.width.value.toString()+"px",height:this.height.value.toString()+"px"}}}function Dt(n,t,e){e.base===void 0&&(e.base={});const s=k(()=>{const{size:u,viewSize:c=new C}=t,{width:h=u.width.value,height:p=u.height.value}=c.toValue(),r=new C({width:h,height:p});return r.isValid()?r.toPx():{}}),i=k(()=>({...l(s),...l(e.color),...l(e.rsc),...l(t.css),...l(e.base)})),a=u=>{Object.assign(e.base,u)};return{style:i,setCss:a,transform:u=>{n.value!==null&&(n.value.clientHeight,a(u))},show:()=>{a({visibility:"visible"})},hide:()=>{a({visibility:"hidden"})}}}const rt=L({__name:"FluxImage",props:{color:{},rsc:{},size:{},viewSize:{},offset:{},css:{}},setup(n,{expose:t}){const e=n,s=m(null),i=K({base:{overflow:"hidden"},color:k(()=>{var r,v;const g={};return e.color!==void 0&&(g.backgroundColor=e.color),((r=e.rsc)==null?void 0:r.backgroundColor)!==null&&(g.backgroundColor=(v=e.rsc)==null?void 0:v.backgroundColor),g}),rsc:k(()=>{const{rsc:r,size:v,offset:g}=e;if(!r)return{};if(r.status.value===B.notLoaded)return r.load(),{};if(!r.isLoaded()||!v.isValid()||!s.value)return{};const{width:f,height:I,top:z,left:T}=r.getResizeProps(v,g);return{backgroundImage:`url(${r.src})`,backgroundSize:`${f}px ${I}px`,backgroundPosition:`${T}px ${z}px`,backgroundRepeat:"no-repeat"}})}),{style:a,setCss:u,transform:c,show:h,hide:p}=Dt(s,e,i);return t({setCss:u,transform:c,show:h,hide:p}),(r,v)=>(d(),x("div",{ref_key:"$el",ref:s,class:"flux-image",style:Z(l(a))},null,4))}}),Kt=L({__name:"FluxTransition",props:{size:{},transition:{},from:{},to:{},displayComponent:{},options:{default:()=>({})}},emits:["ready","start","end"],setup(n,{expose:t,emit:e}){const s=n,i=m(null),a=m(null),u=e,c=K({base:{overflow:"hidden",perspective:"none",zIndex:3}}),h=k(()=>{const{width:g,height:f}=s.size.toPx();return{...c.base,width:g,height:f}}),p=m(1);q(async()=>{await D(),a.value!==null&&(p.value=a.value.totalDuration),u("ready",{transition:s.transition,from:s.from,to:s.to,options:s.options,duration:p.value})});async function r(){u("start",{transition:s.transition,from:s.from,to:s.to,options:s.options,duration:p.value}),await D(),a.value===null?console.error("Transition component not available",s.transition):a.value.onPlay(),setTimeout(()=>v(),p.value)}function v(){u("end",{transition:s.transition,from:s.from,to:s.to,options:s.options,duration:p.value})}return X(()=>{s.displayComponent&&s.displayComponent.show()}),t({start:r}),(g,f)=>(d(),x("div",{ref_key:"$el",ref:i,class:"flux-transition",style:Z(h.value)},[(d(),_(Y(g.transition),{ref_key:"$transition",ref:a,size:g.size,from:g.from,to:g.to,"display-component":g.displayComponent,options:g.options,"mask-style":c.base},null,8,["size","from","to","display-component","options","mask-style"]))],4))}});var S=(n=>(n.prev="prev",n.next="next",n))(S||{}),V=(n=>(n.stopped="stopped",n.playing="playing",n))(V||{});class Wt{constructor(){o(this,"current",null),o(this,"from",null),o(this,"to",null)}reset(){this.current=null,this.from=null,this.to=null}init(t){this.current=t.getFirst()}currentSameAs(t){return this.current.index===t.index}prepareTo(t){this.from=this.current,this.to=t}}class Ut{constructor(){o(this,"current",null),o(this,"last",null)}reset(){this.current=null,this.last=null}init(t){this.last=t.getLast()}setCurrentFinished(){this.last=this.current,this.current=null}}class jt{static withOptions(t){return t.map(e=>{let s=e,i={};return"resource"in e&&(s=e.resource,"options"in e&&(i=e.options)),{resource:s,options:i}})}}class Ht{constructor(t){o(this,"list",M([])),o(this,"loader",m(null)),o(this,"emit"),this.emit=t}getPrev(t){return this.getByIndex(t>0?t-1:this.list.length-1)}getNext(t){return this.getByIndex(t===this.list.length-1?0:t+1)}getFirst(){return this.getByIndex(0)}getLast(){return this.getByOrder(S.prev,0)}getByIndex(t){if(this.list[t]===void 0)throw new ReferenceError(`Resource index ${t} not found`);return{index:t,rsc:this.list[t].resource,options:JSON.parse(JSON.stringify(this.list[t].options))}}getByOrder(t,e){return{prev:()=>this.getPrev(e),next:()=>this.getNext(e)}[t]()}find(t,e){if(typeof t=="number")return this.getByIndex(t);if(e===void 0)throw new ReferenceError("Missing currentIndex parameter");return this.getByOrder(t,e)}update(t,e,s){var i,a;((i=this.loader.value)==null?void 0:i.hasFinished())===!1&&((a=this.loader.value)==null||a.cancel()),this.list.splice(0);const u=jt.withOptions(t);return new Promise((c,h)=>{this.loader.value=new Nt(u,e,s,()=>this.preloadStart(),p=>this.preloadEnd(p,c),()=>this.lazyLoadStart(),p=>this.lazyLoadEnd(p),h)})}preloadStart(){this.emit("resourcesPreloadStart")}preloadEnd(t,e){this.list.push(...t),this.emit("resourcesPreloadEnd"),e()}lazyLoadStart(){this.emit("resourcesLazyloadStart")}lazyLoadEnd(t){this.list.push(...t),this.emit("resourcesLazyloadEnd")}}class Gt{static withOptions(t){return t.map(e=>{let s=e,i={};return"component"in e&&(s=e.component,"options"in e&&(i=e.options)),{component:s,options:i}})}}class Yt{constructor(){o(this,"list",M([]))}getPrev(t){return this.getByIndex(t>0?t-1:this.list.length-1)}getNext(t){return this.getByIndex(t===this.list.length-1?0:t+1)}getFirst(){return this.getByIndex(0)}getLast(){return this.getByOrder(S.prev,0)}getByIndex(t){return{index:t,component:this.list[t].component,options:JSON.parse(JSON.stringify(this.list[t].options))}}getByOrder(t,e){return{prev:()=>this.getPrev(e),next:()=>this.getNext(e)}[t]()}update(t){this.list.splice(0);const e=Gt.withOptions(t);this.list.push(...e)}}class Jt{constructor(t,e,s){o(this,"resource"),o(this,"transition"),o(this,"status",m(V.stopped)),o(this,"config"),o(this,"timers"),o(this,"emit"),o(this,"resources"),o(this,"transitions"),o(this,"$displayComponent",m(null)),this.config=t,this.timers=e,this.emit=s,this.resources=new Ht(s),this.transitions=new Yt,this.resource=M(new Wt),this.transition=M(new Ut)}setup(t){this.$displayComponent=t}play(t=S.next,e){var s,i;const{config:a,timers:u,resource:c}=this;if(this.status.value=V.playing,this.transition.current!==null)return;const h=(i=this.resources)==null?void 0:i.find(t,(s=c.current)==null?void 0:s.index);u.set("transition",e||(h==null?void 0:h.options.delay)||a.delay,()=>{this.show(t)}),this.emit("play",t,e)}async stop(t=!1){const{timers:e}=this;this.status.value=V.stopped,e.clear("transition"),this.transition.current!==null&&t===!0&&await this.end(t),this.emit("stop")}isReadyToShow(){if(this.resource.current===null)throw new ReferenceError("Current resource not set");if(this.resources===null)throw new ReferenceError("Resources list not set");if(this.resources.list.length===0)throw new RangeError("Resources list empty");if(this.transition.last===null)throw new ReferenceError("Last transition not set");if(this.transitions===null)throw new ReferenceError("Transitions list not set");if(this.transitions.list.length===0)throw new RangeError("Transitions list empty");if(this.$displayComponent.value===null)throw new ReferenceError("Display component not set");return!0}async show(t=S.next,e=S.next){if(!this.isReadyToShow())return;const{resource:s,resources:i,config:a,transitions:u}=this;if(this.transition.current!==null){a.allowToSkipTransition&&(await this.end(!0),this.show(t,e));return}const c=i.find(t,s.current.index);if(s.currentSameAs(c))return;s.prepareTo(c),this.timers.clear("transition");const h=typeof e=="number"?u.getByIndex(e):u.getByOrder(e,this.transition.last.index);h.options.direction===void 0&&(typeof t!="number"?h.options.direction=t:h.options.direction=this.resource.from.index<this.resource.to.index?S.next:S.prev),this.transition.current=h,this.emit("show",this.resource,this.transition)}start(){this.resource.current=this.resource.to,this.emit("transitionStart",this.resource,this.transition)}async end(t=!1){const{config:e,resource:s,resources:i,timers:a,transition:u}=this;if(!(s.current===null||i===null)){if(u.setCurrentFinished(),await D(),t===!0?this.emit("transitionCancel",this.resource,this.transition):this.emit("transitionEnd",this.resource,this.transition),this.shouldStopPlaying(e.infinite,s.current,i.list.length-1)){this.stop();return}this.shouldPlayNext()&&a.set("transition",s.current.options.delay||e.delay,()=>{this.show()})}}shouldStopPlaying(t,e,s){return t===!1&&e.index>=s&&this.status.value===V.playing||e.options.stop===!0}shouldPlayNext(){return this.status.value===V.playing}}class Q{constructor(t,e=null,s=null){o(this,"node"),o(this,"config"),o(this,"emit",null),o(this,"size",new C),o(this,"inFullScreen",()=>!!document.fullscreenElement),this.node=t,this.config=e,this.emit=s}static async getSize(t){const e=new Q(t);return await e.updateSize(),e.size}addResizeListener(){window.addEventListener("resize",()=>this.updateSize(),{passive:!0})}removeResizeListener(){window.removeEventListener("resize",this.updateSize)}getAspectRatio(){if(this.config!==null){const[t,e]=this.config.aspectRatio.split(":");return[parseFloat(t),parseFloat(e)]}return[16,9]}async updateSize(){if(this.size.reset(),await D(),this.node.value===null)return;const t=getComputedStyle(this.node.value),e=parseFloat(t.width);let s=parseFloat(t.height);if(["0px","auto",null].includes(t.height)){const[i,a]=this.getAspectRatio();s=e/i*a}this.size.update({width:e,height:s})}toggleFullScreen(){this.inFullScreen()?this.exitFullScreen():this.enterFullScreen()}async enterFullScreen(){var t,e;((t=this.node)==null?void 0:t.value)===null||!((e=this.config)!=null&&e.allowFullscreen)||(await this.node.value.requestFullscreen(),this.emit!==null&&this.emit("fullscreenEnter"))}async exitFullScreen(){await document.exitFullscreen(),this.emit!==null&&this.emit("fullscreenExit")}}class qt{constructor(t,e){o(this,"config"),o(this,"player"),this.config=t,this.player=e}setup(){this.removeKeyListener(),this.config.bindKeys&&this.addKeyListener()}addKeyListener(){window.addEventListener("keydown",t=>this.keydown(t),{passive:!0})}removeKeyListener(){window.removeEventListener("keydown",()=>this.keydown)}keydown(t){if(["ArrowLeft","Left"].includes(t.key)){this.player.show(S.prev);return}if(["ArrowRight","Right"].includes(t.key)){this.player.show(S.next);return}}}class Xt{constructor(){o(this,"isOver",m(!1))}setup(t,e){e.clear("mouseOver"),t.autohideTime===0&&(this.isOver.value=!0)}toggle(t,e,s){t.autohideTime!==0&&(this.isOver.value=s,this[s?"over":"out"](t,e))}out(t,e){e.clear("mouseOver")}over(t,e){e.set("mouseOver",t.autohideTime,()=>this.isOver.value=!1)}}class Zt{constructor(){o(this,"timers",{})}set(t,e,s){this.clear(t),this.timers[t]=setTimeout(s,e)}clear(t){(t!==void 0?[t]:Object.keys(this.timers)).forEach(e=>{clearTimeout(this.timers[e]),delete this.timers[e]})}}class Qt{constructor(){o(this,"startX",0),o(this,"startY",0),o(this,"startTime",0),o(this,"endTime",0),o(this,"prevTouchTime",0),o(this,"tapThreshold",5),o(this,"doubleTapThreshold",200),o(this,"slideTrigger",.3),o(this,"tap",(t,e)=>Math.abs(t)<this.tapThreshold&&Math.abs(e)<this.tapThreshold),o(this,"doubleTap",()=>this.endTime-this.prevTouchTime<this.doubleTapThreshold),o(this,"slideLeft",(t,e)=>e.size.isValid()&&t<0&&t<-(e.size.width.value*this.slideTrigger)),o(this,"slideRight",(t,e)=>e.size.isValid()&&t>0&&t>e.size.width.value*this.slideTrigger),o(this,"slideUp",(t,e)=>e.size.isValid()&&t<0&&t<-(e.size.height.value*this.slideTrigger)),o(this,"slideDown",(t,e)=>e.size.isValid()&&t>0&&t>e.size.height.value*this.slideTrigger)}start(t,e){e.enableGestures&&(this.startTime=Date.now(),this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY)}end(t,e,s,i,a,u){this.prevTouchTime=this.endTime,this.endTime=Date.now();const c=t.changedTouches[0].clientX-this.startX,h=t.changedTouches[0].clientY-this.startY;if(this.tap(c,h)){u.toggle(e,a,!0);return}e.enableGestures&&(this.slideRight(c,i)?s.show(S.prev):this.slideLeft(c,i)&&s.show(S.next))}}const te={key:2,class:"complements"},ee=y("div",{class:"remainder upper"},null,-1),se=y("div",{class:"remainder lower"},null,-1),ie=L({__name:"VueFlux",props:{options:{default:()=>({})},rscs:{},transitions:{}},emits:["created","mounted","unmounted","play","stop","show","optionsUpdated","transitionsUpdated","resourcesPreloadStart","resourcesPreloadEnd","resourcesLazyloadStart","resourcesLazyloadEnd","fullscreenEnter","fullscreenExit","transitionStart","transitionCancel","transitionEnd"],setup(n,{expose:t,emit:e}){const s=n,i=e,a=m(null),u=m(null),c=m(null),h=K({allowFullscreen:!1,allowToSkipTransition:!0,aspectRatio:"16:9",autohideTime:2500,autoplay:!1,bindKeys:!1,delay:5e3,enableGestures:!1,infinite:!0,lazyLoad:!0,lazyLoadAfter:5}),p=new Zt,r=new Jt(h,p,i),v=r.resources,g=r.transitions,f=new Q(a,h,i),I=new qt(h,r),z=new Xt,T=new Qt,U=()=>{Object.assign(h,s.options),z.setup(h,p),I.setup()};J(s.options,()=>{U(),i("optionsUpdated")});async function j(A){const w=r.status.value===V.playing;w&&await r.stop(!0),await{rscs:async()=>await b(),transitions:()=>tt()}[A](),w&&r.play()}async function b(){r.resource.reset();const A=h.lazyLoad?h.lazyLoadAfter:s.rscs.length;try{await v.update(st(s.rscs),A,f.size)}catch(w){console.error(w)}v.list.length&&r.resource.init(v)}J(()=>s.rscs,async()=>{await j("rscs")},{deep:!1});function tt(){r.transition.reset(),g.update(st(s.transitions)),r.transition.init(g)}J(s.transitions,async()=>{await j("transitions"),i("transitionsUpdated")},{deep:!1}),q(async()=>{U(),await f.updateSize(),f.addResizeListener(),r.setup(c),tt(),await b(),h.autoplay===!0&&r.play(),i("mounted")}),X(()=>{p.clear(),f.removeResizeListener(),I.removeKeyListener(),i("unmounted")});const pt=k(()=>f.size.isValid()?f.inFullScreen()?{width:"100% !important",height:"100% !important"}:f.size.toPx():{});return t({show:r.show.bind(r),play:r.play.bind(r),stop:r.stop.bind(r),getPlayer:()=>r,size:f.size}),i("created"),(A,w)=>(d(),x("div",{ref_key:"$el",ref:a,class:"vue-flux",style:Z(pt.value),onMousemove:w[3]||(w[3]=$=>l(z).toggle(h,l(p),!0)),onMouseleave:w[4]||(w[4]=$=>l(z).toggle(h,l(p),!1)),onDblclick:w[5]||(w[5]=$=>l(f).toggleFullScreen()),onTouchstart:w[6]||(w[6]=$=>l(T).start($,h)),onTouchend:w[7]||(w[7]=$=>l(T).end($,h,l(r),l(f),l(p),l(z)))},[l(r).transition.current!==null&&l(f).size.isValid()&&l(r).resource.from!==null&&l(r).resource.to!==null?(d(),_(l(Kt),{key:0,ref_key:"$transition",ref:u,transition:l(r).transition.current.component,size:l(f).size,from:l(r).resource.from.rsc,to:l(r).resource.to.rsc,"display-component":c.value,options:l(r).transition.current.options,onReady:w[0]||(w[0]=$=>{var et;return(et=u.value)==null?void 0:et.start()}),onStart:w[1]||(w[1]=$=>l(r).start()),onEnd:w[2]||(w[2]=$=>l(r).end())},null,8,["transition","size","from","to","display-component","options"])):R("",!0),l(r).resource.current!==null?(d(),_(Y(l(r).resource.current.rsc.display.component),xt({key:1,ref_key:"$displayComponent",ref:c,size:l(f).size,rsc:l(r).resource.current.rsc},l(r).resource.current.rsc.display.props),null,16,["size","rsc"])):R("",!0),l(f).size.isValid()?(d(),x("div",te,[F(A.$slots,"preloader",{loader:l(v).loader}),F(A.$slots,"caption",{player:l(r)}),ee,F(A.$slots,"controls",{mouseOver:l(z).isOver,player:l(r)}),se,F(A.$slots,"index",{mouseOver:l(z).isOver,displaySize:l(f).size,player:l(r)}),F(A.$slots,"pagination",{player:l(r)})])):R("",!0)],36))}}),ne=y("polyline",{points:"64,18 22,50 64,82"},null,-1),re=L({__name:"Prev",setup(n){return(t,e)=>(d(),_(l(W),{class:"prev top left"},{default:E(()=>[ne]),_:1}))}}),oe=y("polygon",{points:"32,12 82,50 32,88"},null,-1),le=L({__name:"Play",setup(n){return(t,e)=>(d(),_(l(W),{class:"play"},{default:E(()=>[oe]),_:1}))}}),ae=y("line",{x1:"32",y1:"22",x2:"32",y2:"78"},null,-1),ue=y("line",{x1:"68",y1:"22",x2:"68",y2:"78"},null,-1),he=L({__name:"Stop",setup(n){return(t,e)=>(d(),_(l(W),{class:"pause"},{default:E(()=>[ae,ue]),_:1}))}}),ce=y("polyline",{points:"36,18 78,50 36,82"},null,-1),de=L({__name:"Next",setup(n){return(t,e)=>(d(),_(l(W),{class:"next top right"},{default:E(()=>[ce]),_:1}))}}),pe={key:0,class:"flux-controls"},ye=L({__name:"FluxControls",props:{mouseOver:{default:void 0},player:{}},setup(n){const t=n,e=k(()=>!(t.player.resource.current===null||t.mouseOver!==void 0&&l(t.mouseOver)===!1));return(s,i)=>(d(),_(ot,{name:"fade"},{default:E(()=>[e.value?(d(),x("div",pe,[P(re,{onClick:i[0]||(i[0]=a=>s.player.show(l(S).prev))}),(s.player.status.value||s.player.status)===l(V).stopped?(d(),_(le,{key:0,onClick:i[1]||(i[1]=a=>s.player.play(l(S).next,1))})):R("",!0),(s.player.status.value||s.player.status)===l(V).playing?(d(),_(he,{key:1,onClick:i[2]||(i[2]=a=>s.player.stop())})):R("",!0),P(de,{onClick:i[3]||(i[3]=a=>s.player.show(l(S).next))})])):R("",!0)]),_:1}))}}),ve=y("rect",{x:"17.5",y:"17.5",width:"12px",height:"12px"},null,-1),ge=y("rect",{x:"17.5",y:"43",width:"12px",height:"12px"},null,-1),fe=y("rect",{x:"17.5",y:"68.5",width:"12px",height:"12px"},null,-1),me=y("rect",{x:"43",y:"17.5",width:"12px",height:"12px"},null,-1),we=y("rect",{x:"43",y:"43",width:"12px",height:"12px"},null,-1),ze=y("rect",{x:"43",y:"68.5",width:"12px",height:"12px"},null,-1),xe=y("rect",{x:"68.5",y:"17.5",width:"12px",height:"12px"},null,-1),Se=y("rect",{x:"68.5",y:"43",width:"12px",height:"12px"},null,-1),_e=y("rect",{x:"68.5",y:"68.5",width:"12px",height:"12px"},null,-1),Le=L({__name:"Button",props:{mouseOver:{default:void 0}},setup(n){const t=n,e=k(()=>[!0,void 0].includes(l(t.mouseOver)));return(s,i)=>(d(),_(ot,{name:"fade"},{default:E(()=>[e.value?(d(),_(l(W),{key:0,class:"toggle bottom left"},{default:E(()=>[ve,ge,fe,me,we,ze,xe,Se,_e]),_:1})):R("",!0)]),_:1}))}}),ke=L({__name:"Thumb",props:{rsc:{},size:{}},setup(n){return(t,e)=>(d(),x("li",null,[(d(),_(Y(t.rsc.transition.component),{rsc:t.rsc,size:t.size.value,title:t.rsc.caption},null,8,["rsc","size","title"]))]))}});function be(n,t){const e=k(()=>{let{width:i,height:a}=n.toValue();return i=i/4.2,a=i*90/160,i>160&&(i=160,a=90),new C({width:i,height:a})});function s(i){const{current:a}=t.resource;return a===null||a.index!==i?"":"current"}return{size:e,getClass:s}}const Ee=500,Te=L({__name:"List",props:{displaySize:{},player:{},mouseOver:{default:void 0}},setup(n,{expose:t}){const e=n,s=m(null),i=m(!1),a=k(()=>{const p=[];return i.value&&p.push("visible"),p});async function u(){s.value!==null&&(e.player.stop(),i.value=!0,await D(),s.value.clientHeight,s.value.style.marginTop="0")}function c(p){var r;s.value!==null&&((r=e.player.resource.current)==null?void 0:r.index)!==p&&(e.mouseOver!==void 0&&(s.value.clientHeight,s.value.style.marginTop="100%"),setTimeout(()=>{i.value=!1,p!==null&&e.player.show(p)},Ee))}const h=be(e.displaySize,e.player);return t({show:u}),(p,r)=>(d(),x("nav",{class:N(a.value),onClick:r[0]||(r[0]=v=>c(null))},[y("ul",{ref_key:"$list",ref:s},[(d(!0),x(lt,null,at(p.player.resources.list,(v,g)=>(d(),_(ke,{key:g,rsc:v.resource,size:l(h).size,class:N(l(h).getClass(g)),onClick:f=>c(g)},null,8,["rsc","size","class","onClick"]))),128))],512)],2))}}),Re={key:0,class:"flux-index"},Ce=L({__name:"FluxIndex",props:{mouseOver:{default:void 0},displaySize:{},player:{}},setup(n){const t=n,e=m(null),s=k(()=>t.player.resources.list.length>0);return(i,a)=>s.value?(d(),x("div",Re,[i.mouseOver?(d(),_(Le,{key:0,"mouse-over":i.mouseOver,onClick:a[0]||(a[0]=u=>{var c;return(c=e.value)==null?void 0:c.show()})},null,8,["mouse-over"])):R("",!0),P(Te,{ref_key:"$fluxIndexList",ref:e,"display-size":i.displaySize,player:i.player,"mouse-over":i.mouseOver},null,8,["display-size","player","mouse-over"])])):R("",!0)}}),Oe={key:0,class:"flux-pagination"},Pe=["title","onClick"],Ae=L({__name:"FluxPagination",props:{player:{}},setup(n){const t=n,{player:{resources:e,resource:s,transition:i}}=t,a=k(()=>e.list.length>0),u=h=>h.resource.caption,c=(h,p)=>{var r;const v=[p];let g=((r=s.current)==null?void 0:r.index)===h;return i.current!==null&&(g=!1),g===!0&&v.push("active"),v};return(h,p)=>a.value?(d(),x("nav",Oe,[y("ul",null,[(d(!0),x(lt,null,at(h.player.resources.list,(r,v)=>(d(),x("li",{key:v},[F(h.$slots,"default",{index:v,rsc:r,title:u(r),cssClass:c(v,"custom-pagination-item")},()=>[y("span",{title:u(r),class:N(c(v,"pagination-item")),onClick:g=>h.player.show(v)},null,10,Pe)])]))),128))])])):R("",!0)}}),$e={class:"preloader"},Ve={key:0,class:"spinner"},Fe={class:"pct"},Be=y("div",{class:"border"},null,-1),Ie=L({__name:"FluxPreloader",props:{loader:{}},setup(n){return(t,e)=>{var s,i,a;return d(),x("div",$e,[F(t.$slots,"default",{loader:t.loader,preloading:(s=t.loader.value)==null?void 0:s.preLoading.length,lazyloading:(i=t.loader.value)==null?void 0:i.lazyLoading.length,pct:(a=t.loader.value)==null?void 0:a.progress},()=>{var u,c;return[(u=t.loader.value)!=null&&u.preLoading.length?(d(),x("div",Ve,[y("div",Fe,ut((c=t.loader.value)==null?void 0:c.progress)+"%",1),Be])):R("",!0)]})])}}});function Me(n,t){Object.assign(n,{direction:S.next},t)}const Ne=L({__name:"Fade",props:{options:{},size:{},from:{},to:{},maskStyle:{},displayComponent:{}},setup(n,{expose:t}){const e=n,s=m(null),i=K({totalDuration:1200,easing:"ease-in"});Me(i,e.options);const a={zIndex:1};return t({onPlay:()=>{s.value.transform({transition:`opacity ${i.totalDuration}ms ${i.easing}`,opacity:0})},totalDuration:i.totalDuration}),(u,c)=>(d(),_(Y(u.from.transition.component),{ref_key:"$from",ref:s,rsc:u.from,size:u.size,css:a},null,8,["rsc","size"]))}}),dt=n=>(kt("data-v-7ecf98bc"),n=n(),bt(),n),De={class:"about"},Ke={class:"container"},We={class:"title"},Ue={class:"d-flex align-items-center justify-content-center"},je=dt(()=>y("img",{width:"70",src:zt,alt:""},null,-1)),He={class:"underline"},Ge={class:"cont"},Ye={key:0,class:"text-center text-white"},Je={key:1,class:"row"},qe={class:"modal-content"},Xe=dt(()=>y("div",{class:"overlay"},null,-1)),Ze=["src"],Qe={__name:"Photos",async setup(n){let t,e;gt();const{public:{apiBase:s,api:i}}=mt(),{data:a,pending:u}=([t,e]=St(()=>wt(`${i.GetPhotoAlbum}`,{baseURL:s,credentials:"include"},"$NiwSbG1CDo")),t=await t,e(),t),c=K({allowFullscreen:!0,allowToSkipTransition:!1,autohideTime:2500,autoplay:!1,bindKeys:!1,delay:5e3,enableGestures:!1,infinite:!0,lazyLoad:!0,lazyLoadAfter:3});let h=M([]);const p=M([Ne]);let r=m();const v=()=>{var z;return h=[],(z=a.value)==null||z.forEach(T=>{h.push(new It(`${s}/${T.photo}`))}),h},g=()=>{r.value=!1},f=z=>{z.target.classList.contains("overlay")&&(r.value=!1),z.target.classList.contains("overlay")&&(r.value=!1)},I=z=>{(z.key==="Escape"||z.key==="Esc")&&(r.value=!1)};return q(()=>{document.addEventListener("click",f),document.addEventListener("keydown",I)}),X(()=>{document.removeEventListener("click",f)}),_t(()=>{document.removeEventListener("keydown",I)}),(z,T)=>{const U=yt,j=ft;return d(),x("div",De,[y("div",Ke,[y("div",We,[y("h1",Ue,[je,y("span",He,ut(z.$i18n.locale==="ar"?"البوم الصور":"Photo Album"),1)])])]),y("div",Ge,[l(u)?(d(),x("div",Ye,[P(U)])):(d(),x("div",Je,[P(j,null,{default:E(()=>[y("div",{class:N([l(r)?"active":"","modal"]),dir:"ltr"},[y("div",qe,[y("span",{class:"close",onClick:T[0]||(T[0]=b=>g())},"×"),Xe,P(l(ie),{dir:z.$i18n.locale==="ar"?"rtl":"ltr",options:l(c),rscs:v(),transitions:l(p),class:N(["gallery",l(r)===!0?"active":""])},{preloader:E(b=>[P(l(Ie),H(G(b)),null,16)]),controls:E(b=>[P(l(ye),H(G(b)),null,16)]),index:E(b=>[P(l(Ce),H(G(b)),null,16)]),pagination:E(b=>[P(l(Ae),H(G(b)),null,16)]),_:1},8,["dir","options","rscs","transitions","class"])])],2)]),_:1}),y("div",{class:"images col-lg-4",onClick:T[1]||(T[1]=b=>Lt(r)?r.value=!0:r=!0)},[y("img",{src:`${l(s)}/${l(a)[0].photo}`,alt:""},null,8,Ze)])]))])])}}},rs=vt(Qe,[["__scopeId","data-v-7ecf98bc"]]);export{rs as default};
