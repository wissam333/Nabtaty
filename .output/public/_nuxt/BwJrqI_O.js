import{_ as G}from"./Ch5Sa6jZ.js";import{_ as Y}from"./DX_Q7PSB.js";import{_ as z,u as W,b as H,a as J,c as P,d as Q}from"./ggi4YNCB.js";import{a as d,k as X,a3 as m,D as p,a8 as e,a0 as l,Q as $,a1 as L,u as n,z as u,M as g,Y as T,F as V,af as K,ag as Z,a4 as A,w as B,S as ee,a6 as se,a7 as ae}from"./Bynz-MEc.js";import{u as x}from"./BWQMGdzM.js";import{s as le}from"./DS0BfLD8.js";import{_ as te}from"./CnTX9zt1.js";import{u as I,w as oe}from"./D5JNrnKm.js";import"./Bsjm0cNi.js";import"./Dj9urW5l.js";import"./D9hLvVIP.js";import"./BKHN_0FP.js";import"./CkBuMpX3.js";import"./BZxYlsYh.js";import"./Dx0W9_GM.js";const ie=N=>(se("data-v-81d975d4"),N=N(),ae(),N),ne={class:"title-container"},re={class:"head-title"},de={class:"header4"},ue={class:"options"},ce={class:"d-flex flex-column-reverse mx-2"},me=["placeholder"],pe={class:"table-responsive"},fe={key:0,class:"loading"},ve=ie(()=>e("img",{src:P,alt:""},null,-1)),_e=[ve],he={key:1,class:"product-tabel"},be={class:"d-flex align-items-center"},Ce={class:"product-img"},$e=["src"],ge={key:1,src:te,alt:""},Ne={class:"product-info d-flex flex-column align-items-start"},ye={class:"fw-bold"},we={class:"badge rounded-pill bg-primary me-1"},ke=["onClick"],Se=["dir"],De={class:"fw-bold mb-5"},Ee={class:"content"},Le={class:"d-flex flex-column-reverse mb-3"},Ae=["placeholder"],xe={for:"firstName"},Ue={class:"d-flex flex-column-reverse mb-3"},Fe=["placeholder"],Ie={for:"lastName"},Re={class:"d-flex flex-column-reverse mb-3"},Te=["placeholder"],Ve={for:"email"},Be={class:"mt-5 d-flex w-100 justify-content-end"},Me=["onClick"],qe={__name:"Customers",setup(N){const{public:{api:y,apiBase:w}}=J(),{locale:k}=W(),{$awn:S}=Q();let c=d(!1),f=d(),r=d(!1);const M=s=>{r.value=s};let v=d("");const R=X(()=>{var s;return(s=F.value)==null?void 0:s.filter(a=>a.firstName.toLowerCase().includes(v.value.toLowerCase())||a.lastName.toLowerCase().includes(v.value.toLowerCase()))});let U=d(!1),F=d();const D=async()=>{if(U.value=!0,k.value==="ar"){const{data:s,pending:a}=await x(`${y.GetAllCustomers}`,{credentials:"include",baseURL:w,headers:{"accept-language":"ar"}},"$SxH51Jjh17");B(()=>{s.value&&(F.value=s.value)})}else{const{data:s,pending:a}=await x(`${y.GetAllCustomers}`,{credentials:"include",baseURL:w,headers:{"accept-language":"en"}},"$3SDFSGn4Bg");B(()=>{s.value&&(F.value=s.value)})}U.value=!1};D();const q=async()=>{await x(`${y.DeleteCustomer}/${f.value.id}`,{credentials:"include",baseURL:w,method:"DELETE"},"$7CxvWyysFa"),D(),r.value=!1,k.value==="en"?S.success("Customer Deleted Successfully",{durations:{global:5e3}}):S.success("تم حذف الزبون بنجاح",{durations:{global:5e3}})};let _=d(),h=d(),b=d();const O=async()=>{await x(y.CreateCustomer,{baseURL:w,credentials:"include",method:"POST",body:{firstName:h.value,lastName:b.value,email:_.value}},"$hxIhp3lXpe"),h.value="",b.value="",_.value="",c.value=!1,D(),k.value==="en"?S.success("Added Successfully",{durations:{global:5e3}}):S.success("تم الإضافة بنجاح",{durations:{global:5e3}})},j=()=>{let s=R.value.filter(o=>!o.is_admin),a;k.value==="en"?a=s.map(o=>({FirstName:o.firstName,LastName:o.lastName,Email:o.email,Created_at:o.created_at.slice(0,10)})):a=s.map(o=>({الاسم_الأول:o.firstName,الاسم_الأخير:o.lastName,البريد_الإلكتروني:o.email,تاريح_الإنشاء:o.created_at.slice(0,10)}));const C=I.json_to_sheet(a),E=I.book_new();I.book_append_sheet(E,C,"Customers"),oe(E,"Customers.xlsx")};return(s,a)=>{const C=G,E=Y,o=le;return m(),p(V,null,[e("div",{class:Z(["contain",("useSidebar"in s?s.useSidebar:n(H))().value?"shrink":""])},[e("div",ne,[e("div",re,[e("h4",de,l(s.$i18n.locale==="ar"?"قائمة الزبائن":"Customers List"),1)]),e("div",ue,[e("div",ce,[$(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>u(v)?v.value=t:v=t),id:"price",type:"text",required:"",placeholder:s.$i18n.locale==="ar"?"ابحث":"Search"},null,8,me),[[L,n(v)]])]),e("div",{class:"reload btn btn-success mx-2",onClick:a[1]||(a[1]=t=>u(c)?c.value=!0:c=!0)},[g(C,{icon:["fas","plus"]}),T(" "+l(s.$i18n.locale==="ar"?"إضافة":"Add"),1)]),e("div",{class:"reload btn btn-success",onClick:a[2]||(a[2]=t=>D())},[g(C,{icon:["fas","rotate-right"]}),T(" "+l(s.$i18n.locale==="ar"?"إعادة تحميل":"Reload"),1)]),e("div",{class:"reload btn btn-success mx-1",onClick:j},l(s.$i18n.locale==="ar"?"تصدير":"Export"),1)])]),e("div",pe,[n(U)?(m(),p("div",fe,_e)):(m(),p("div",he,[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,l(s.$i18n.locale==="ar"?"الاسم":"Name"),1),e("th",null,l(s.$i18n.locale==="ar"?"البريد الإلكتروني":"Email"),1),e("th",null,l(s.$i18n.locale==="ar"?"تاريخ الإنشاء":"Created At"),1),e("th",null,l(s.$i18n.locale==="ar"?"تعديل":"Edit"),1)])]),e("tbody",null,[(m(!0),p(V,null,K(n(R),t=>{var i;return $((m(),p("tr",{class:"rows",key:t.id},[e("td",be,[e("div",Ce,[t.thumbnail?(m(),p("img",{key:0,src:t.thumbnail,alt:""},null,8,$e)):(m(),p("img",ge))]),e("div",Ne,[e("h5",null,l(t.firstName),1),e("h5",null,l(t.lastName),1)])]),e("td",ye,l(t.email),1),e("td",null,[e("p",we,l((i=t.created_at)==null?void 0:i.slice(0,10)),1)]),e("td",null,[e("span",{class:"delete",onClick:Oe=>{u(r)?r.value=!0:r=!0,u(f)?f.value=t:f=t}},[g(C,{icon:["fas","trash"]})],8,ke)])])),[[ee,!t.is_admin]])}),128))])])]))])],2),g(E,{isOpen:n(r),onUpdateIsOpen:M},{header:A(()=>[e("h4",null,l(s.$i18n.locale==="ar"?"تأكيد الحذف":"Confirm Delete"),1)]),content:A(()=>[e("p",null,l(s.$i18n.locale==="ar"?"هل أنت متأكد من أنك تريد حذف":"Are You Sure You Want To Delete")+' "'+l(n(f).firstName+" "+n(f).lastName)+'"'+l(s.$i18n.locale==="ar"?"؟":"?"),1)]),footer:A(()=>[e("button",{class:"btn btn-secondary",onClick:a[3]||(a[3]=t=>u(r)?r.value=!1:r=!1)},l(s.$t("Close")),1),e("button",{class:"btn btn-danger",onClick:a[4]||(a[4]=t=>q())},l(s.$t("Delete")),1)]),_:1},8,["isOpen"]),g(o,{visible:n(c),"onUpdate:visible":a[9]||(a[9]=t=>u(c)?c.value=t:c=t),modal:"",style:{width:"50rem"}},{container:A(({closeCallback:t})=>[e("div",{class:"dialog",dir:s.$i18n.locale==="ar"?"rtl":"ltr"},[e("h5",De,l(s.$i18n.locale==="ar"?"إضافة زبون":"Add Customer"),1),e("div",Ee,[e("div",null,[e("div",Le,[$(e("input",{"onUpdate:modelValue":a[5]||(a[5]=i=>u(h)?h.value=i:h=i),id:"firstName",type:"text",autocomplete:"off",placeholder:s.$i18n.locale==="ar"?"الاسم الاول":"First Name",required:""},null,8,Ae),[[L,n(h)]]),e("label",xe,l(s.$i18n.locale==="ar"?"الاسم الاول":"First Name")+" *",1)]),e("div",Ue,[$(e("input",{"onUpdate:modelValue":a[6]||(a[6]=i=>u(b)?b.value=i:b=i),id:"lastName",type:"text",autocomplete:"off",placeholder:s.$i18n.locale==="ar"?"الاسم الاخير":"Last Name",title:"Enter only letters and spaces",required:""},null,8,Fe),[[L,n(b)]]),e("label",Ie,l(s.$i18n.locale==="ar"?"الاسم الاخير":"Last Name")+" *",1)]),e("div",Re,[$(e("input",{"onUpdate:modelValue":a[7]||(a[7]=i=>u(_)?_.value=i:_=i),id:"email",type:"email",autocomplete:"off",placeholder:s.$i18n.locale==="ar"?"البريد الإلكتروني":"Email",title:"Enter only letters and spaces",required:""},null,8,Te),[[L,n(_)]]),e("label",Ve,l(s.$i18n.locale==="ar"?"البريد الإلكتروني":"Email")+" *",1)])])]),e("div",Be,[e("button",{class:"btn btn-secondary",onClick:t},l(s.$t("Close")),9,Me),e("button",{class:"btn btn-success mx-2",onClick:a[8]||(a[8]=i=>O()),autofocus:""},l(s.$t("Add")),1)])],8,Se)]),_:1},8,["visible"])],64)}}},ls=z(qe,[["__scopeId","data-v-81d975d4"]]);export{ls as default};
