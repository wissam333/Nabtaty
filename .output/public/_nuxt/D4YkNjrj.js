import{_ as q}from"./B4QukuNw.js";import{_ as z}from"./BbA-o76e.js";import{_ as J}from"./C3_fBZW9.js";import{_ as j,u as H,b as K,a as Z,c as ee,d as ae}from"./B-xVLMgY.js";import{a as p,ae as te,k as se,a3 as i,D as c,a8 as a,a0 as n,Y as T,M as r,a4 as y,Q as le,a1 as ne,u as h,z as L,F as B,af as oe,ag as ie,w as g,a6 as ce,a7 as de}from"./Bynz-MEc.js";import{u as m}from"./BiZJ-hRq.js";import{s as re}from"./BmwhZgw7.js";import{_ as ue}from"./TvlYamwF.js";import{u as x,w as me}from"./D5JNrnKm.js";import"./DwlXvmMR.js";import"./wdptxeXm.js";import"./Df-GVvyW.js";const _e=k=>(ce("data-v-3955de1a"),k=k(),de(),k),pe={class:"title-container"},he={class:"head-title"},ve={class:"header4"},fe={class:"options"},be={class:"d-flex flex-column-reverse mx-2"},ge=["placeholder"],$e={class:"table-responsive"},ye={key:0,class:"loading"},ke=_e(()=>a("img",{src:ee,alt:""},null,-1)),we=[ke],Ce={key:1,class:"product-tabel"},Se={class:"d-flex align-items-center"},Le={class:"product-img"},Pe=["src"],De={key:1,src:ue,alt:""},Ee={class:"product-info d-flex flex-column align-items-start"},Re={class:"badge rounded-pill bg-primary me-1"},Ue={class:"badge rounded-pill bg-secondary me-1"},Ae={key:0,class:"badge rounded-pill bg-success me-1"},Ne={key:1,class:"badge rounded-pill bg-danger me-1"},Te={key:0,class:"badge rounded-pill bg-success me-1"},xe={key:1,class:"badge rounded-pill bg-danger me-1"},Ie={class:""},Ge=["onClick"],Ve=["onClick"],Me=["onClick"],Oe={class:"edit"},Be={__name:"ListProduct",async setup(k){let w,I;const{public:{api:u,apiBase:d}}=Z(),{locale:v}=H(),{$awn:C}=ae();let P=p(!1),D=p();const S=async()=>{if(P.value=!0,v.value==="ar"){const{data:e,pending:t}=await m(`${u.GetAllPlants}`,{credentials:"include",baseURL:d,credentials:"include",headers:{"accept-language":"ar"}},"$8A8PffWCdr");g(()=>{e.value&&(D.value=e.value)})}else{const{data:e,pending:t}=await m(`${u.GetAllPlants}`,{credentials:"include",baseURL:d,credentials:"include",headers:{"accept-language":"en"}},"$ltvuhMbEk2");g(()=>{e.value&&(D.value=e.value)})}P.value=!1};S();let E=p();(async()=>{if(v.value==="ar"){const{data:e,pending:t}=await m(`${u.findAllCategories}`,{credentials:"include",baseURL:d,headers:{"accept-language":"ar"}},"$Ip1Tp9y4fL");g(()=>{e.value&&(E.value=e.value)})}else{const{data:e,pending:t}=await m(`${u.findAllCategories}`,{credentials:"include",baseURL:d,headers:{"accept-language":"en"}},"$JX1bQhQzOq");g(()=>{e.value&&(E.value=e.value)})}})();let R=p();(async()=>{if(v.value==="ar"){const{data:e,pending:t}=await m(`${u.GetSubCat}`,{credentials:"include",baseURL:d,headers:{"accept-language":"ar"}},"$AYmuxKNTdR");g(()=>{e.value&&(R.value=e.value)})}else{const{data:e,pending:t}=await m(`${u.GetSubCat}`,{credentials:"include",baseURL:d,headers:{"accept-language":"en"}},"$RfGEdJ5XOM");g(()=>{e.value&&(R.value=e.value)})}})(),[w,I]=te(()=>m(u.GetSubCat,{baseURL:d,credentials:"include",method:"GET"},"$sha7XrrDWf")),w=await w,I();const U=e=>{var o,s;let t=(o=E.value)==null?void 0:o.filter(b=>b.id===e);if(t)return(s=t[0])==null?void 0:s.category_name},A=e=>{var o,s;let t=(o=R.value)==null?void 0:o.filter(b=>b.id===e);if(t)return(s=t[0])==null?void 0:s.subcategory_name};let f=p(),_=p(!1);const F=e=>{_.value=e};let $=p("");const N=se(()=>{var e;return(e=D.value)==null?void 0:e.filter(t=>t.plant_name.toLowerCase().includes($.value.toLowerCase()))}),Y=async e=>{await m(`${u.RemovePlantImage}/${e}`,{credentials:"include",baseURL:d,method:"DELETE"},"$OSXQxvLi7V")},Q=async()=>{var t;const{data:e}=await m(`${u.GetPlantById}/${f.value.id}`,{credentials:"include",baseURL:d,method:"GET"},"$FdJDdU6ZfH");await((t=e.value[0].photos)==null?void 0:t.map(async o=>{await Y(o.photo_id)})),await m(`${u.DeletePlant}/${f.value.id}`,{credentials:"include",baseURL:d,method:"DELETE"},"$ElredUOLhW"),S(),_.value=!1,v.value==="en"?C.success("Plant Deleted Successfully",{durations:{global:5e3}}):C.success("تم حذف النبات بنجاح",{durations:{global:5e3}})},W=()=>{let e;v.value==="en"?e=N.value.map(s=>({Name:s.plant_name,Categories:U(s.category_id),Sub_Category:A(s.subcategory_id),New:s.newest?"Yes":"No",Recommended:s.recommended?"Yes":"No"})):e=N.value.map(s=>({الاسم:s.plant_name,الفئة:U(s.category_id),الفئة_الفرعية:A(s.subcategory_id),جديد:s.newest?"نعم":"لا",مقترح:s.recommended?"نعم":"لا"}));const t=x.json_to_sheet(e),o=x.book_new();x.book_append_sheet(o,t,"Products"),me(o,"Products.xlsx")},G=e=>!!e,V=async e=>{const t=new FormData;t.append("is_active",e.is_active?0:1),await m(`${u.UpdatePlant}/${e.id}`,{credentials:"include",baseURL:d,method:"PUT",body:t},"$gSftBEoN3m"),S(),v.value==="en"?C.success("Edited Successfully",{durations:{global:5e3}}):C.success("تم التعديل بنجاح",{durations:{global:5e3}})};return(e,t)=>{const o=q,s=z,b=re,X=J;return i(),c(B,null,[a("div",{class:ie(["contain",("useSidebar"in e?e.useSidebar:h(K))().value?"shrink":""])},[a("div",pe,[a("div",he,[a("h4",ve,n(e.$i18n.locale==="ar"?"قائمة النباتات":"Plant List"),1),a("p",null,[T(n(e.$i18n.locale==="ar"?"إضافة نبات جديد من":"Add new Plant from")+" ",1),r(o,{to:"/admin/AddProduct"},{default:y(()=>[T(n(e.$i18n.locale==="ar"?"هنا":"here"),1)]),_:1})])]),a("div",fe,[a("div",be,[le(a("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>L($)?$.value=l:$=l),id:"price",type:"text",required:"",placeholder:e.$i18n.locale==="ar"?"ابحث":"Search"},null,8,ge),[[ne,h($)]])]),a("div",{class:"reload btn btn-success mx-1",onClick:t[1]||(t[1]=l=>S())},[r(s,{icon:["fas","rotate-right"]}),T(" "+n(e.$i18n.locale==="ar"?"إعادة تحميل":"Reload"),1)]),a("div",{class:"reload btn btn-success mx-1",onClick:W},n(e.$i18n.locale==="ar"?"تصدير":"Export"),1)])]),a("div",$e,[h(P)?(i(),c("div",ye,we)):(i(),c("div",Ce,[a("table",null,[a("thead",null,[a("tr",null,[a("th",null,n(e.$i18n.locale==="ar"?"الاسم":"Name"),1),a("th",null,n(e.$i18n.locale==="ar"?"الفئة":"Category"),1),a("th",null,n(e.$i18n.locale==="ar"?"الفئة الفرعية":"Sub Category"),1),a("th",null,n(e.$i18n.locale==="ar"?"جديد":"New"),1),a("th",null,n(e.$i18n.locale==="ar"?"مقترح":"Recommended"),1),a("th",null,n(e.$i18n.locale==="ar"?"فعال":"Active"),1),a("th",null,n(e.$i18n.locale==="ar"?"تعديل":"Edit"),1)])]),a("tbody",null,[(i(!0),c(B,null,oe(h(N),l=>{var M;return i(),c("tr",{class:"rows",key:l.id},[a("td",Se,[a("div",Le,[(M=l==null?void 0:l.photos)!=null&&M.photoPath?(i(),c("img",{key:0,src:h(d)+"/"+l.photos.photoPath,alt:""},null,8,Pe)):(i(),c("img",De))]),a("div",Ee,[a("h5",null,n(l.plant_name),1)])]),a("td",null,[a("p",Re,n(U(l.category_id)),1)]),a("td",null,[a("p",Ue,n(A(l.subcategory_id)),1)]),a("td",null,[l.newest?(i(),c("p",Ae,[r(s,{class:"check",icon:["fas","check"]})])):(i(),c("p",Ne,[r(s,{class:"check",icon:["fas","xmark"]})]))]),a("td",null,[l.recommended?(i(),c("p",Te,[r(s,{class:"check",icon:["fas","check"]})])):(i(),c("p",xe,[r(s,{class:"check",icon:["fas","xmark"]})]))]),a("td",Ie,[l.is_active?(i(),c("div",{key:0,onClick:O=>V(l)},[r(b,{modelValue:G(l.is_active),binary:""},null,8,["modelValue"])],8,Ge)):(i(),c("div",{key:1,onClick:O=>V(l)},[r(b,{modelValue:G(l.is_active),binary:""},null,8,["modelValue"])],8,Ve))]),a("td",null,[a("span",{class:"delete",onClick:O=>{L(_)?_.value=!0:_=!0,L(f)?f.value=l:f=l}},[r(s,{icon:["fas","trash"]})],8,Me),r(o,{to:`/admin/EditProduct/${l.id}`,class:"edit-link"},{default:y(()=>[a("span",Oe,[r(s,{icon:["fas","pen-to-square"]})])]),_:2},1032,["to"])])])}),128))])])]))])],2),r(X,{isOpen:h(_),onUpdateIsOpen:F},{header:y(()=>[a("h4",null,n(e.$i18n.locale==="ar"?"تأكيد الحذف":"Confirm Delete"),1)]),content:y(()=>[a("p",null,n(e.$i18n.locale==="ar"?"هل أنت متأكد من أنك تريد حذف":"Are You Sure You Want To Delete")+' "'+n(h(f).plant_name)+'"'+n(e.$i18n.locale==="ar"?"؟":"?"),1)]),footer:y(()=>[a("button",{class:"btn btn-secondary",onClick:t[2]||(t[2]=l=>L(_)?_.value=!1:_=!1)},n(e.$t("Close")),1),a("button",{class:"btn btn-danger",onClick:t[3]||(t[3]=l=>Q())},n(e.$t("Delete")),1)]),_:1},8,["isOpen"])],64)}}},ta=j(Be,[["__scopeId","data-v-3955de1a"]]);export{ta as default};
