import{_ as O}from"./BQRx4-yy.js";import{_ as x}from"./C2n-eNo5.js";import{_ as B}from"./EliaPgF0.js";import{_ as V,u as Y,b as q,a as z,c as F,d as Q}from"./Cvcrh2Yh.js";import{a as _,ae as J,k as W,a3 as n,D as o,a8 as a,a0 as t,Y as R,M as c,a4 as g,Q as X,a1 as K,u,z as k,F as T,af as j,ag as H,w as y,a6 as Z,a7 as ee}from"./BUNOv-RT.js";import{u as h}from"./DyfGw3PU.js";import{_ as ae}from"./CfPNh7No.js";const se=b=>(Z("data-v-5e9bc87c"),b=b(),ee(),b),te={class:"title-container"},le={class:"head-title"},ne={class:"header4"},oe={class:"options"},ie={class:"d-flex flex-column-reverse mx-2"},ce=["placeholder"],de={class:"table-responsive"},re={key:0,class:"loading"},ue=se(()=>a("img",{src:F,alt:""},null,-1)),pe=[ue],_e={key:1,class:"product-tabel"},he={class:"d-flex align-items-center"},me={class:"product-img"},fe=["src"],ve={key:1,src:ae,alt:""},ge={class:"product-info d-flex flex-column align-items-start"},be={class:"fw-bold"},$e={class:"badge rounded-pill bg-primary me-1"},ke={key:0,class:"badge rounded-pill bg-success me-1"},ye={key:1,class:"badge rounded-pill bg-danger me-1"},we={key:0,class:"badge rounded-pill bg-success me-1"},Ce={key:1,class:"badge rounded-pill bg-danger me-1"},Pe=["onClick"],De={class:"edit"},Le={__name:"ListProduct",async setup(b){let $,E;const{public:{api:p,apiBase:r}}=z(),{locale:w}=Y(),{$awn:S}=Q();let C=_(!1),P=_();const D=async()=>{if(C.value=!0,w.value==="ar"){const{data:e,pending:l}=await h(`${p.GetAllPlants}`,{credentials:"include",baseURL:r,credentials:"include",headers:{"accept-language":"ar"}},"$8A8PffWCdr");y(()=>{e.value&&(P.value=e.value)})}else{const{data:e,pending:l}=await h(`${p.GetAllPlants}`,{credentials:"include",baseURL:r,credentials:"include",headers:{"accept-language":"en"}},"$ltvuhMbEk2");y(()=>{e.value&&(P.value=e.value)})}C.value=!1};D();let L=_();(async()=>{if(w.value==="ar"){const{data:e,pending:l}=await h(`${p.findAllCategories}`,{credentials:"include",baseURL:r,headers:{"accept-language":"ar"}},"$Ip1Tp9y4fL");y(()=>{e.value&&(L.value=e.value)})}else{const{data:e,pending:l}=await h(`${p.findAllCategories}`,{credentials:"include",baseURL:r,headers:{"accept-language":"en"}},"$JX1bQhQzOq");y(()=>{e.value&&(L.value=e.value)})}})(),[$,E]=J(()=>h(p.GetSubCat,{baseURL:r,credentials:"include",method:"GET"},"$AYmuxKNTdR")),$=await $,E();const U=e=>{var v,i;let l=(v=L.value)==null?void 0:v.filter(A=>A.id===e);if(l)return(i=l[0])==null?void 0:i.category_name};let m=_(),d=_(!1);const I=e=>{d.value=e};let f=_("");const M=W(()=>{var e;return(e=P.value)==null?void 0:e.filter(l=>l.plant_name.toLowerCase().includes(f.value.toLowerCase()))}),G=async()=>{await h(`${p.DeletePlant}/${m.value.id}`,{credentials:"include",baseURL:r,method:"DELETE"},"$RfGEdJ5XOM"),D(),d.value=!1,w.value==="en"?S.success("Plant Deleted Successfully",{durations:{global:5e3}}):S.success("تم حذف النبات بنجاح",{durations:{global:5e3}})};return(e,l)=>{const v=O,i=x,A=B;return n(),o(T,null,[a("div",{class:H(["contain",("useSidebar"in e?e.useSidebar:u(q))().value?"shrink":""])},[a("div",te,[a("div",le,[a("h4",ne,t(e.$i18n.locale==="ar"?"قائمة النباتات":"Plant List"),1),a("p",null,[R(t(e.$i18n.locale==="ar"?"إضافة نبات جديد من":"Add new Plant from")+" ",1),c(v,{to:"/AddProduct"},{default:g(()=>[R(t(e.$i18n.locale==="ar"?"هنا":"here"),1)]),_:1})])]),a("div",oe,[a("div",ie,[X(a("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>k(f)?f.value=s:f=s),id:"price",type:"text",required:"",placeholder:e.$i18n.locale==="ar"?"ابحث":"Search"},null,8,ce),[[K,u(f)]])]),a("div",{class:"reload btn btn-success",onClick:l[1]||(l[1]=s=>D())},[c(i,{icon:["fas","rotate-right"]}),R(" "+t(e.$i18n.locale==="ar"?"إعادة تحميل":"Reload"),1)])])]),a("div",de,[u(C)?(n(),o("div",re,pe)):(n(),o("div",_e,[a("table",null,[a("thead",null,[a("tr",null,[a("th",null,t(e.$i18n.locale==="ar"?"الاسم":"Name"),1),a("th",null,t(e.$i18n.locale==="ar"?"السعر":"Price"),1),a("th",null,t(e.$i18n.locale==="ar"?"الفئات":"Categories"),1),a("th",null,t(e.$i18n.locale==="ar"?"جديد":"New"),1),a("th",null,t(e.$i18n.locale==="ar"?"مقترح":"Recommended"),1),a("th",null,t(e.$i18n.locale==="ar"?"تعديل":"Edit"),1)])]),a("tbody",null,[(n(!0),o(T,null,j(u(M),s=>{var N;return n(),o("tr",{class:"rows",key:s.id},[a("td",he,[a("div",me,[(N=s==null?void 0:s.photos)!=null&&N.photoPath?(n(),o("img",{key:0,src:u(r)+"/"+s.photos.photoPath,alt:""},null,8,fe)):(n(),o("img",ve))]),a("div",ge,[a("h5",null,t(s.plant_name),1)])]),a("td",be,"$"+t(s.price),1),a("td",null,[a("p",$e,t(U(s.category_id)),1)]),a("td",null,[s.newest?(n(),o("p",ke,[c(i,{class:"check",icon:["fas","check"]})])):(n(),o("p",ye,[c(i,{class:"check",icon:["fas","xmark"]})]))]),a("td",null,[s.recommended?(n(),o("p",we,[c(i,{class:"check",icon:["fas","check"]})])):(n(),o("p",Ce,[c(i,{class:"check",icon:["fas","xmark"]})]))]),a("td",null,[a("span",{class:"delete",onClick:Re=>{k(d)?d.value=!0:d=!0,k(m)?m.value=s:m=s}},[c(i,{icon:["fas","trash"]})],8,Pe),c(v,{to:`/EditProduct/${s.id}`,class:"edit-link"},{default:g(()=>[a("span",De,[c(i,{icon:["fas","pen-to-square"]})])]),_:2},1032,["to"])])])}),128))])])]))])],2),c(A,{isOpen:u(d),onUpdateIsOpen:I},{header:g(()=>[a("h4",null,t(e.$i18n.locale==="ar"?"تأكيد الحذف":"Confirm Delete"),1)]),content:g(()=>[a("p",null,t(e.$i18n.locale==="ar"?"هل أنت متأكد من أنك تريد حذف":"Are You Sure You Want To Delete")+' "'+t(u(m).plant_name)+'"'+t(e.$i18n.locale==="ar"?"؟":"?"),1)]),footer:g(()=>[a("button",{class:"btn btn-secondary",onClick:l[2]||(l[2]=s=>k(d)?d.value=!1:d=!1)},t(e.$t("Close")),1),a("button",{class:"btn btn-danger",onClick:l[3]||(l[3]=s=>G())},t(e.$t("Delete")),1)]),_:1},8,["isOpen"])],64)}}},Ge=V(Le,[["__scopeId","data-v-5e9bc87c"]]);export{Ge as default};
