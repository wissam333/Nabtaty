import{_ as B}from"./C2n-eNo5.js";import{_ as F}from"./EliaPgF0.js";import{_ as M,u as T,b as U,a as x,c as V,d as G}from"./Cvcrh2Yh.js";import{a as u,k as O,a3 as n,D as i,a8 as e,a0 as t,Q as D,a1 as Y,u as r,z as _,M as g,Y as z,F as N,af as W,ag as j,a4 as C,w as L,S as q,a6 as H,a7 as J}from"./BUNOv-RT.js";import{u as $}from"./DyfGw3PU.js";import{_ as Q}from"./CfPNh7No.js";const K=m=>(H("data-v-062abf62"),m=m(),J(),m),P={class:"title-container"},X={class:"head-title"},Z={class:"header4"},ee={class:"options"},se={class:"d-flex flex-column-reverse mx-2"},ae=["placeholder"],te={class:"table-responsive"},le={key:0,class:"loading"},oe=K(()=>e("img",{src:V,alt:""},null,-1)),ne=[oe],ie={key:1,class:"product-tabel"},re={class:"d-flex align-items-center"},ce={class:"product-img"},de=["src"],ue={key:1,src:Q,alt:""},me={class:"product-info d-flex flex-column align-items-start"},_e={class:"fw-bold"},pe={class:"badge rounded-pill bg-primary me-1"},fe=["onClick"],he={__name:"Customers",setup(m){const{public:{api:p,apiBase:f}}=x(),{locale:w}=T(),{$awn:y}=G();let c=u(),o=u(!1);const E=s=>{o.value=s};let d=u("");const A=O(()=>{var s;return(s=v.value)==null?void 0:s.filter(l=>l.firstName.toLowerCase().includes(d.value.toLowerCase())||l.lastName.toLowerCase().includes(d.value.toLowerCase()))});let h=u(!1),v=u();const b=async()=>{if(h.value=!0,w.value==="ar"){const{data:s,pending:l}=await $(`${p.GetAllCustomers}`,{credentials:"include",baseURL:f,headers:{"accept-language":"ar"}},"$SxH51Jjh17");L(()=>{s.value&&(v.value=s.value)})}else{const{data:s,pending:l}=await $(`${p.GetAllCustomers}`,{credentials:"include",baseURL:f,headers:{"accept-language":"en"}},"$3SDFSGn4Bg");L(()=>{s.value&&(v.value=s.value)})}h.value=!1};b();const I=async()=>{await $(`${p.DeleteCustomer}/${c.value.id}`,{credentials:"include",baseURL:f,method:"DELETE"},"$7CxvWyysFa"),b(),o.value=!1,w.value==="en"?y.success("Customer Deleted Successfully",{durations:{global:5e3}}):y.success("تم حذف الزبون بنجاح",{durations:{global:5e3}})};return(s,l)=>{const S=B,R=F;return n(),i(N,null,[e("div",{class:j(["contain",("useSidebar"in s?s.useSidebar:r(U))().value?"shrink":""])},[e("div",P,[e("div",X,[e("h4",Z,t(s.$i18n.locale==="ar"?"قائمة الزبائن":"Customers List"),1)]),e("div",ee,[e("div",se,[D(e("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>_(d)?d.value=a:d=a),id:"price",type:"text",required:"",placeholder:s.$i18n.locale==="ar"?"ابحث":"Search"},null,8,ae),[[Y,r(d)]])]),e("div",{class:"reload btn btn-success",onClick:l[1]||(l[1]=a=>b())},[g(S,{icon:["fas","rotate-right"]}),z(" "+t(s.$i18n.locale==="ar"?"إعادة تحميل":"Reload"),1)])])]),e("div",te,[r(h)?(n(),i("div",le,ne)):(n(),i("div",ie,[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,t(s.$i18n.locale==="ar"?"الاسم":"Name"),1),e("th",null,t(s.$i18n.locale==="ar"?"البريد الإلكتروني":"Email"),1),e("th",null,t(s.$i18n.locale==="ar"?"تاريخ الإنشاء":"Created At"),1),e("th",null,t(s.$i18n.locale==="ar"?"تعديل":"Edit"),1)])]),e("tbody",null,[(n(!0),i(N,null,W(r(A),a=>{var k;return D((n(),i("tr",{class:"rows",key:a.id},[e("td",re,[e("div",ce,[a.thumbnail?(n(),i("img",ue)):(n(),i("img",{key:0,src:a.thumbnail,alt:""},null,8,de))]),e("div",me,[e("h5",null,t(a.firstName),1),e("h5",null,t(a.lastName),1)])]),e("td",_e,"$"+t(a.email),1),e("td",null,[e("p",pe,t((k=a.created_at)==null?void 0:k.slice(0,10)),1)]),e("td",null,[e("span",{class:"delete",onClick:ve=>{_(o)?o.value=!0:o=!0,_(c)?c.value=a:c=a}},[g(S,{icon:["fas","trash"]})],8,fe)])])),[[q,!a.is_admin]])}),128))])])]))])],2),g(R,{isOpen:r(o),onUpdateIsOpen:E},{header:C(()=>[e("h4",null,t(s.$i18n.locale==="ar"?"تأكيد الحذف":"Confirm Delete"),1)]),content:C(()=>[e("p",null,t(s.$i18n.locale==="ar"?"هل أنت متأكد من أنك تريد حذف":"Are You Sure You Want To Delete")+' "'+t(r(c).firstName+" "+r(c).lastName)+'"'+t(s.$i18n.locale==="ar"?"؟":"?"),1)]),footer:C(()=>[e("button",{class:"btn btn-secondary",onClick:l[2]||(l[2]=a=>_(o)?o.value=!1:o=!1)},t(s.$t("Close")),1),e("button",{class:"btn btn-danger",onClick:l[3]||(l[3]=a=>I())},t(s.$t("Delete")),1)]),_:1},8,["isOpen"])],64)}}},Se=M(he,[["__scopeId","data-v-062abf62"]]);export{Se as default};
