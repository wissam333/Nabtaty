import{_ as O}from"./BT-Qu7lE.js";import{_ as G}from"./BsokhOmq.js";import{_ as Y,u as j,b as z,a as W,c as H,d as J}from"./jYgtRURX.js";import{a as r,k as P,a3 as c,D as m,a8 as e,a0 as a,Q as b,a1 as k,u as n,z as d,M as C,Y as F,F as I,af as Q,ag as X,a4 as S,w as R,S as K,a6 as Z,a7 as ee}from"./BUNOv-RT.js";import{u as D}from"./CIDCv4JU.js";import{s as se}from"./jJTAKNcH.js";import{_ as le}from"./DVBQ373y.js";import"./CVFZgMxr.js";import"./NnKg8xVr.js";import"./CtpHovBX.js";import"./DH2EAqIc.js";import"./COqWHCqS.js";import"./Dp1lg6ms.js";import"./oVyfZXnB.js";const ae=$=>(Z("data-v-6da6e62c"),$=$(),ee(),$),te={class:"title-container"},oe={class:"head-title"},ne={class:"header4"},ie={class:"options"},re={class:"d-flex flex-column-reverse mx-2"},de=["placeholder"],ue={class:"table-responsive"},ce={key:0,class:"loading"},me=ae(()=>e("img",{src:H,alt:""},null,-1)),pe=[me],fe={key:1,class:"product-tabel"},ve={class:"d-flex align-items-center"},_e={class:"product-img"},he=["src"],be={key:1,src:le,alt:""},Ce={class:"product-info d-flex flex-column align-items-start"},$e={class:"fw-bold"},ge={class:"badge rounded-pill bg-primary me-1"},ye=["onClick"],Ne=["dir"],we={class:"fw-bold mb-5"},ke={class:"content"},Se={class:"d-flex flex-column-reverse mb-3"},De=["placeholder"],Le={for:"firstName"},Ee={class:"d-flex flex-column-reverse mb-3"},Ae=["placeholder"],Ue={for:"lastName"},Fe={class:"d-flex flex-column-reverse mb-3"},Ie=["placeholder"],Re={for:"email"},Ve={class:"mt-5 d-flex w-100 justify-content-end"},Te=["onClick"],xe={__name:"Customers",setup($){const{public:{api:g,apiBase:y}}=W(),{locale:L}=j(),{$awn:N}=J();let u=r(!1),p=r(),i=r(!1);const V=s=>{i.value=s};let f=r("");const T=P(()=>{var s;return(s=A.value)==null?void 0:s.filter(l=>l.firstName.toLowerCase().includes(f.value.toLowerCase())||l.lastName.toLowerCase().includes(f.value.toLowerCase()))});let E=r(!1),A=r();const w=async()=>{if(E.value=!0,L.value==="ar"){const{data:s,pending:l}=await D(`${g.GetAllCustomers}`,{credentials:"include",baseURL:y,headers:{"accept-language":"ar"}},"$SxH51Jjh17");R(()=>{s.value&&(A.value=s.value)})}else{const{data:s,pending:l}=await D(`${g.GetAllCustomers}`,{credentials:"include",baseURL:y,headers:{"accept-language":"en"}},"$3SDFSGn4Bg");R(()=>{s.value&&(A.value=s.value)})}E.value=!1};w();const x=async()=>{await D(`${g.DeleteCustomer}/${p.value.id}`,{credentials:"include",baseURL:y,method:"DELETE"},"$7CxvWyysFa"),w(),i.value=!1,L.value==="en"?N.success("Customer Deleted Successfully",{durations:{global:5e3}}):N.success("تم حذف الزبون بنجاح",{durations:{global:5e3}})};let v=r(),_=r(),h=r();const B=async()=>{await D(g.CreateCustomer,{baseURL:y,credentials:"include",method:"POST",body:{firstName:_.value,lastName:h.value,email:v.value}},"$hxIhp3lXpe"),_.value="",h.value="",v.value="",u.value=!1,w(),L.value==="en"?N.success("Added Successfully",{durations:{global:5e3}}):N.success("تم الإضافة بنجاح",{durations:{global:5e3}})};return(s,l)=>{const U=O,M=G,q=se;return c(),m(I,null,[e("div",{class:X(["contain",("useSidebar"in s?s.useSidebar:n(z))().value?"shrink":""])},[e("div",te,[e("div",oe,[e("h4",ne,a(s.$i18n.locale==="ar"?"قائمة الزبائن":"Customers List"),1)]),e("div",ie,[e("div",re,[b(e("input",{"onUpdate:modelValue":l[0]||(l[0]=t=>d(f)?f.value=t:f=t),id:"price",type:"text",required:"",placeholder:s.$i18n.locale==="ar"?"ابحث":"Search"},null,8,de),[[k,n(f)]])]),e("div",{class:"reload btn btn-success mx-2",onClick:l[1]||(l[1]=t=>d(u)?u.value=!0:u=!0)},[C(U,{icon:["fas","plus"]}),F(" "+a(s.$i18n.locale==="ar"?"إضافة":"Add"),1)]),e("div",{class:"reload btn btn-success",onClick:l[2]||(l[2]=t=>w())},[C(U,{icon:["fas","rotate-right"]}),F(" "+a(s.$i18n.locale==="ar"?"إعادة تحميل":"Reload"),1)])])]),e("div",ue,[n(E)?(c(),m("div",ce,pe)):(c(),m("div",fe,[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,a(s.$i18n.locale==="ar"?"الاسم":"Name"),1),e("th",null,a(s.$i18n.locale==="ar"?"البريد الإلكتروني":"Email"),1),e("th",null,a(s.$i18n.locale==="ar"?"تاريخ الإنشاء":"Created At"),1),e("th",null,a(s.$i18n.locale==="ar"?"تعديل":"Edit"),1)])]),e("tbody",null,[(c(!0),m(I,null,Q(n(T),t=>{var o;return b((c(),m("tr",{class:"rows",key:t.id},[e("td",ve,[e("div",_e,[t.thumbnail?(c(),m("img",{key:0,src:t.thumbnail,alt:""},null,8,he)):(c(),m("img",be))]),e("div",Ce,[e("h5",null,a(t.firstName),1),e("h5",null,a(t.lastName),1)])]),e("td",$e,a(t.email),1),e("td",null,[e("p",ge,a((o=t.created_at)==null?void 0:o.slice(0,10)),1)]),e("td",null,[e("span",{class:"delete",onClick:Be=>{d(i)?i.value=!0:i=!0,d(p)?p.value=t:p=t}},[C(U,{icon:["fas","trash"]})],8,ye)])])),[[K,!t.is_admin]])}),128))])])]))])],2),C(M,{isOpen:n(i),onUpdateIsOpen:V},{header:S(()=>[e("h4",null,a(s.$i18n.locale==="ar"?"تأكيد الحذف":"Confirm Delete"),1)]),content:S(()=>[e("p",null,a(s.$i18n.locale==="ar"?"هل أنت متأكد من أنك تريد حذف":"Are You Sure You Want To Delete")+' "'+a(n(p).firstName+" "+n(p).lastName)+'"'+a(s.$i18n.locale==="ar"?"؟":"?"),1)]),footer:S(()=>[e("button",{class:"btn btn-secondary",onClick:l[3]||(l[3]=t=>d(i)?i.value=!1:i=!1)},a(s.$t("Close")),1),e("button",{class:"btn btn-danger",onClick:l[4]||(l[4]=t=>x())},a(s.$t("Delete")),1)]),_:1},8,["isOpen"]),C(q,{visible:n(u),"onUpdate:visible":l[9]||(l[9]=t=>d(u)?u.value=t:u=t),modal:"",style:{width:"50rem"}},{container:S(({closeCallback:t})=>[e("div",{class:"dialog",dir:s.$i18n.locale==="ar"?"rtl":"ltr"},[e("h5",we,a(s.$i18n.locale==="ar"?"إضافة زبون":"Add Customer"),1),e("div",ke,[e("div",null,[e("div",Se,[b(e("input",{"onUpdate:modelValue":l[5]||(l[5]=o=>d(_)?_.value=o:_=o),id:"firstName",type:"text",autocomplete:"off",placeholder:s.$i18n.locale==="ar"?"الاسم الاول":"First Name",required:""},null,8,De),[[k,n(_)]]),e("label",Le,a(s.$i18n.locale==="ar"?"الاسم الاول":"First Name")+" *",1)]),e("div",Ee,[b(e("input",{"onUpdate:modelValue":l[6]||(l[6]=o=>d(h)?h.value=o:h=o),id:"lastName",type:"text",autocomplete:"off",placeholder:s.$i18n.locale==="ar"?"الاسم الاخير":"Last Name",title:"Enter only letters and spaces",required:""},null,8,Ae),[[k,n(h)]]),e("label",Ue,a(s.$i18n.locale==="ar"?"الاسم الاخير":"Last Name")+" *",1)]),e("div",Fe,[b(e("input",{"onUpdate:modelValue":l[7]||(l[7]=o=>d(v)?v.value=o:v=o),id:"email",type:"email",autocomplete:"off",placeholder:s.$i18n.locale==="ar"?"البريد الإلكتروني":"Email",title:"Enter only letters and spaces",required:""},null,8,Ie),[[k,n(v)]]),e("label",Re,a(s.$i18n.locale==="ar"?"البريد الإلكتروني":"Email")+" *",1)])])]),e("div",Ve,[e("button",{class:"btn btn-secondary",onClick:t},a(s.$t("Close")),9,Te),e("button",{class:"btn btn-success mx-2",onClick:l[8]||(l[8]=o=>B()),autofocus:""},a(s.$t("Add")),1)])],8,Ne)]),_:1},8,["visible"])],64)}}},Ze=Y(xe,[["__scopeId","data-v-6da6e62c"]]);export{Ze as default};
