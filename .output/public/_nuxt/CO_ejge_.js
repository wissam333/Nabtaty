import{u as h,d as f,r as g}from"./f7AHfytN.js";import{a as y,r as C}from"./DM_oAa4t.js";const b=()=>{const e=h().value,{$awn:o}=g(),c=y(f().value),l=(t,r)=>{let s=C({id:e.items.length,product_id:t.id,qty:r,price:Number(t.price),item:t,photo:t!=null&&t.photos[0]?t==null?void 0:t.photos[0]:""});e.items.push(s),e.totalQty+=r,e.totalPrice+=Number(t.price)*Number(r),a(e),o.success(c.value==="ar"?"تم إضافة المنتج إلى سلة التسوق":"Product has been added to the cart")},u=(t,r)=>{if(e.items.length==0)l(t,r);else{let s=!1;e.items.forEach(p=>{p.product_id==t.id&&p.price==t.price&&(s=!0,p.qty+=r,e.totalQty+=r,e.totalPrice+=Number(t.price)*r,a(e),o.success(c.value==="ar"?"تم تحديث المنتج في سلة التسوق":"Product has been updated in the cart"))}),s||l(t,r)}},i=(t,r)=>{e.items.hasOwnProperty(t)&&e.items[t]&&(e.items[t].qty+=r,e.totalQty+=r,e.totalPrice+=r*e.items[t].price,a(e))},n=(t,r)=>{e.items[t].qty-=1,e.totalQty-=1,e.totalPrice-=e.items[t].price,a(e)},m=t=>{e.items[t].qty+=1,e.totalQty+=1,e.totalPrice+=e.items[t].price,a(e)},d=t=>{e.totalQty-=e.items[t].qty,e.totalPrice-=e.items[t].qty*e.items[t].price,e.items.splice(t,1),a(e),o.success(c.value==="ar"?"تم إزالة المنتج من سلة التسوق":"Product has been removed from cart")},a=t=>{localStorage.getItem("cart")&&localStorage.removeItem("cart"),localStorage.setItem("cart",JSON.stringify(t))};return{addToCart:l,addToCartWithQty:u,updateQty:i,removeItemFromCart:d,CartdecreaseQty:n,CartincreaseQty:m}};export{b as u};
